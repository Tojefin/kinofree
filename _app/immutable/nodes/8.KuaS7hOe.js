import{s as q,a as ve,c as _e,b as I,d,f as h,i as N,g as v,n as J,j as w,q as B,l as Q,k as E,r as L,m as W,z as Be,D as Y,L as Le,e as ce,B as Ae,a4 as Me,h as Fe,x as Se,a1 as ge,t as oe,E as Ue,a2 as je}from"../chunks/scheduler.UmdBsXoH.js";import{S as x,i as ee,t as C,g as le,e as re,b as U,c as O,a as z,m as K,d as R,f as Ne}from"../chunks/index.Vbt9v2Aa.js";import{g as Oe,U as ze}from"../chunks/ui.films.-Yy92MPi.js";import{e as fe,w as Ke}from"../chunks/searchFilm.q046qK5L.js";import{a as Re}from"../chunks/entry.aW5UZKBI.js";import{U as Pe}from"../chunks/ui.button.eDEFvkPg.js";import{p as Te}from"../chunks/stores.mgNFDFHj.js";import{p as Z}from"../chunks/index.3YLQEot0.js";import{A as qe}from"../chunks/arrow.68QDVyr3.js";function Ge(s){let e,l;return{c(){e=ve("svg"),l=ve("path"),this.h()},l(r){e=_e(r,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var t=I(e);l=_e(t,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),I(l).forEach(d),t.forEach(d),this.h()},h(){h(l,"d","M6.66696 3.33317H5.46696C4.72022 3.33317 4.34658 3.33317 4.06136 3.4785C3.81048 3.60633 3.60665 3.81015 3.47882 4.06104C3.3335 4.34625 3.3335 4.7199 3.3335 5.46663V10.5333C3.3335 11.28 3.3335 11.6532 3.47882 11.9384C3.60665 12.1893 3.81048 12.3935 4.06136 12.5213C4.3463 12.6665 4.71949 12.6665 5.46477 12.6665H10.5356C11.2808 12.6665 11.6535 12.6665 11.9384 12.5213C12.1893 12.3935 12.3938 12.1891 12.5216 11.9382C12.6668 11.6533 12.6668 11.2805 12.6668 10.5352V9.33317M13.3335 5.99984V2.6665M13.3335 2.6665H10.0002M13.3335 2.6665L8.66683 7.33317"),h(l,"stroke","white"),h(l,"stroke-width","2"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(e,"width","16"),h(e,"height","16"),h(e,"viewBox","0 0 16 16"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(r,t){N(r,e,t),v(e,l)},p:J,i:J,o:J,d(r){r&&d(e)}}}class Xe extends x{constructor(e){super(),ee(this,e,null,Ge,q,{})}}function Ze(s){let e,l,r,t,a,n,i;return{c(){e=w("label"),l=w("input"),r=B(),t=w("span"),a=Q(s[1]),this.h()},l(o){e=E(o,"LABEL",{class:!0});var u=I(e);l=E(u,"INPUT",{type:!0,id:!0,class:!0}),r=L(u),t=E(u,"SPAN",{class:!0});var g=I(t);a=W(g,s[1]),g.forEach(d),u.forEach(d),this.h()},h(){h(l,"type","checkbox"),h(l,"id",s[0]),l.checked=s[2],h(l,"class","svelte-1lfkvy"),h(t,"class","svelte-1lfkvy"),h(e,"class","checkbox svelte-1lfkvy")},m(o,u){N(o,e,u),v(e,l),v(e,r),v(e,t),v(t,a),n||(i=Be(e,"input",s[3]),n=!0)},p(o,[u]){u&1&&h(l,"id",o[0]),u&4&&(l.checked=o[2]),u&2&&Y(a,o[1])},i:J,o:J,d(o){o&&d(e),n=!1,i()}}}function Je(s,e,l){let{id:r}=e,{label:t=""}=e,{checked:a=!1}=e;function n(i){Le.call(this,s,i)}return s.$$set=i=>{"id"in i&&l(0,r=i.id),"label"in i&&l(1,t=i.label),"checked"in i&&l(2,a=i.checked)},[r,t,a,n]}class Qe extends x{constructor(e){super(),ee(this,e,Je,Ze,q,{id:0,label:1,checked:2})}}function ke(s,e,l){const r=s.slice();return r[4]=e[l],r}function be(s){let e,l;function r(...t){return s[2](s[4],...t)}return e=new Qe({props:{id:s[4].id,label:s[4].label,checked:s[0]==s[4].id}}),e.$on("input",r),{c(){O(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},p(t,a){s=t;const n={};a&2&&(n.id=s[4].id),a&2&&(n.label=s[4].label),a&3&&(n.checked=s[0]==s[4].id),e.$set(n)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function We(s){let e,l,r=fe(s[1]),t=[];for(let n=0;n<r.length;n+=1)t[n]=be(ke(s,r,n));const a=n=>U(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=ce()},l(n){for(let i=0;i<t.length;i+=1)t[i].l(n);e=ce()},m(n,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,i);N(n,e,i),l=!0},p(n,[i]){if(i&3){r=fe(n[1]);let o;for(o=0;o<r.length;o+=1){const u=ke(n,r,o);t[o]?(t[o].p(u,i),C(t[o],1)):(t[o]=be(u),t[o].c(),C(t[o],1),t[o].m(e.parentNode,e))}for(le(),o=r.length;o<t.length;o+=1)a(o);re()}},i(n){if(!l){for(let i=0;i<r.length;i+=1)C(t[i]);l=!0}},o(n){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)U(t[i]);l=!1},d(n){n&&d(e),Ae(t,n)}}}function Ye(s,e,l){let{options:r=[]}=e;var t=Me();let{value:a=""}=e;const n=(i,o)=>{l(0,a=o.target.checked?i.id:void 0)};return s.$$set=i=>{"options"in i&&l(1,r=i.options),"value"in i&&l(0,a=i.value)},s.$$.update=()=>{s.$$.dirty&1&&t("change",a)},[a,r,n]}class xe extends x{constructor(e){super(),ee(this,e,Ye,We,q,{options:1,value:0})}}function $e(s,e,l){const r=s.slice();return r[20]=e[l],r}function we(s){let e,l,r,t=s[3],a,n,i,o,u,g,c,f,_=(s[0].description||"Описание не найдено")+"",j,m,k,F,P,H,G="Плееры",T,M,V,S=Ee(s),b=s[6].score>0&&ye(s),$=s[1]&&Ie(s),X=fe(s[2]),D=[];for(let p=0;p<X.length;p+=1)D[p]=Ce($e(s,X,p));const He=p=>U(D[p],1,1,()=>{D[p]=null});return{c(){e=w("section"),l=w("div"),r=w("div"),S.c(),a=B(),n=w("aside"),i=w("div"),o=w("a"),u=w("div"),b&&b.c(),c=B(),f=w("p"),j=Q(_),m=B(),k=w("div"),$&&$.c(),F=B(),P=w("div"),H=w("h4"),H.textContent=G,T=B(),M=w("div");for(let p=0;p<D.length;p+=1)D[p].c();this.h()},l(p){e=E(p,"SECTION",{class:!0});var A=I(e);l=E(A,"DIV",{class:!0});var y=I(l);r=E(y,"DIV",{class:!0});var te=I(r);S.l(te),te.forEach(d),a=L(y),n=E(y,"ASIDE",{class:!0});var se=I(n);i=E(se,"DIV",{class:!0});var ne=I(i);o=E(ne,"A",{href:!0,target:!0});var he=I(o);u=E(he,"DIV",{class:!0});var de=I(u);b&&b.l(de),de.forEach(d),he.forEach(d),c=L(ne),f=E(ne,"P",{class:!0});var me=I(f);j=W(me,_),me.forEach(d),ne.forEach(d),m=L(se),k=E(se,"DIV",{class:!0});var ae=I(k);$&&$.l(ae),F=L(ae),P=E(ae,"DIV",{class:!0});var ie=I(P);H=E(ie,"H4",{class:!0,"data-svelte-h":!0}),Se(H)!=="svelte-1y64ufn"&&(H.textContent=G),T=L(ie),M=E(ie,"DIV",{class:!0});var pe=I(M);for(let ue=0;ue<D.length;ue+=1)D[ue].l(pe);pe.forEach(d),ie.forEach(d),ae.forEach(d),se.forEach(d),y.forEach(d),A.forEach(d),this.h()},h(){h(r,"class","player svelte-gvp5dv"),h(u,"class","rating svelte-gvp5dv"),h(o,"href",g=`https://www.kinopoisk.ru/film/${s[5].id}`),h(o,"target","_blank"),h(f,"class","svelte-gvp5dv"),h(i,"class","info svelte-gvp5dv"),h(H,"class","svelte-gvp5dv"),h(M,"class","svelte-gvp5dv"),h(P,"class","sources svelte-gvp5dv"),h(k,"class","actions svelte-gvp5dv"),h(n,"class","svelte-gvp5dv"),h(l,"class","box svelte-gvp5dv"),h(e,"class","svelte-gvp5dv")},m(p,A){N(p,e,A),v(e,l),v(l,r),S.m(r,null),v(l,a),v(l,n),v(n,i),v(i,o),v(o,u),b&&b.m(u,null),v(i,c),v(i,f),v(f,j),v(n,m),v(n,k),$&&$.m(k,null),v(k,F),v(k,P),v(P,H),v(P,T),v(P,M);for(let y=0;y<D.length;y+=1)D[y]&&D[y].m(M,null);V=!0},p(p,A){if(A&8&&q(t,t=p[3])?(S.d(1),S=Ee(p),S.c(),S.m(r,null)):S.p(p,A),p[6].score>0?b?(b.p(p,A),A&64&&C(b,1)):(b=ye(p),b.c(),C(b,1),b.m(u,null)):b&&(le(),U(b,1,1,()=>{b=null}),re()),(!V||A&32&&g!==(g=`https://www.kinopoisk.ru/film/${p[5].id}`))&&h(o,"href",g),(!V||A&1)&&_!==(_=(p[0].description||"Описание не найдено")+"")&&Y(j,_),p[1]?$?($.p(p,A),A&2&&C($,1)):($=Ie(p),$.c(),C($,1),$.m(k,F)):$&&(le(),U($,1,1,()=>{$=null}),re()),A&268){X=fe(p[2]);let y;for(y=0;y<X.length;y+=1){const te=$e(p,X,y);D[y]?(D[y].p(te,A),C(D[y],1)):(D[y]=Ce(te),D[y].c(),C(D[y],1),D[y].m(M,null))}for(le(),y=X.length;y<D.length;y+=1)He(y);re()}},i(p){if(!V){C(b),C($);for(let A=0;A<X.length;A+=1)C(D[A]);V=!0}},o(p){U(b),U($),D=D.filter(Boolean);for(let A=0;A<D.length;A+=1)U(D[A]);V=!1},d(p){p&&d(e),S.d(p),b&&b.d(),$&&$.d(),Ae(D,p)}}}function Ee(s){let e,l;return{c(){e=w("iframe"),this.h()},l(r){e=E(r,"IFRAME",{title:!0,sandbox:!0,src:!0,class:!0}),I(e).forEach(d),this.h()},h(){h(e,"title","player"),e.allowFullscreen="true",h(e,"sandbox","allow-scripts allow-same-origin"),ge(e.src,l=s[3]+s[0].kinopoiskId)||h(e,"src",l),h(e,"class","svelte-gvp5dv")},m(r,t){N(r,e,t)},p(r,t){t&9&&!ge(e.src,l=r[3]+r[0].kinopoiskId)&&h(e,"src",l)},d(r){r&&d(e)}}}function ye(s){let e,l=s[6].score+"",r,t,a,n=s[6].platform+"",i,o,u,g;return u=new Xe({}),{c(){e=w("mark"),r=Q(l),t=B(),a=w("span"),i=Q(n),o=B(),O(u.$$.fragment),this.h()},l(c){e=E(c,"MARK",{class:!0});var f=I(e);r=W(f,l),f.forEach(d),t=L(c),a=E(c,"SPAN",{class:!0});var _=I(a);i=W(_,n),_.forEach(d),o=L(c),z(u.$$.fragment,c),this.h()},h(){h(e,"class","svelte-gvp5dv"),oe(e,"okey",s[6].score>3.9&&s[6].score<7),oe(e,"bad",s[6].score<4),h(a,"class","svelte-gvp5dv")},m(c,f){N(c,e,f),v(e,r),N(c,t,f),N(c,a,f),v(a,i),N(c,o,f),K(u,c,f),g=!0},p(c,f){(!g||f&64)&&l!==(l=c[6].score+"")&&Y(r,l),(!g||f&64)&&oe(e,"okey",c[6].score>3.9&&c[6].score<7),(!g||f&64)&&oe(e,"bad",c[6].score<4),(!g||f&64)&&n!==(n=c[6].platform+"")&&Y(i,n)},i(c){g||(C(u.$$.fragment,c),g=!0)},o(c){U(u.$$.fragment,c),g=!1},d(c){c&&(d(e),d(t),d(a),d(o)),R(u,c)}}}function Ie(s){let e,l,r="Добавить в профиль",t,a,n,i,o;function u(c){s[14](c)}let g={options:s[7]};return s[4]!==void 0&&(g.value=s[4]),n=new xe({props:g}),Ue.push(()=>Ne(n,"value",u)),n.$on("change",s[15]),{c(){e=w("div"),l=w("h4"),l.textContent=r,t=B(),a=w("div"),O(n.$$.fragment),this.h()},l(c){e=E(c,"DIV",{class:!0});var f=I(e);l=E(f,"H4",{class:!0,"data-svelte-h":!0}),Se(l)!=="svelte-1yzpk7b"&&(l.textContent=r),t=L(f),a=E(f,"DIV",{class:!0});var _=I(a);z(n.$$.fragment,_),_.forEach(d),f.forEach(d),this.h()},h(){h(l,"class","svelte-gvp5dv"),h(a,"class","svelte-gvp5dv"),h(e,"class","list svelte-gvp5dv")},m(c,f){N(c,e,f),v(e,l),v(e,t),v(e,a),K(n,a,null),o=!0},p(c,f){const _={};!i&&f&16&&(i=!0,_.value=c[4],je(()=>i=!1)),n.$set(_)},i(c){o||(C(n.$$.fragment,c),o=!0)},o(c){U(n.$$.fragment,c),o=!1},d(c){c&&d(e),R(n)}}}function et(s){let e=s[20].name+"",l,r;return{c(){l=Q(e),r=B()},l(t){l=W(t,e),r=L(t)},m(t,a){N(t,l,a),N(t,r,a)},p(t,a){a&4&&e!==(e=t[20].name+"")&&Y(l,e)},d(t){t&&(d(l),d(r))}}}function Ce(s){let e,l;function r(){return s[16](s[20])}return e=new Pe({props:{toggle:!0,active:s[3]==s[20].iframe,$$slots:{default:[et]},$$scope:{ctx:s}}}),e.$on("click",r),{c(){O(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},p(t,a){s=t;const n={};a&12&&(n.active=s[3]==s[20].iframe),a&8388612&&(n.$$scope={dirty:a,ctx:s}),e.$set(n)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function tt(s){let e,l,r=s[0]!=""&&we(s);return{c(){r&&r.c(),e=ce()},l(t){r&&r.l(t),e=ce()},m(t,a){r&&r.m(t,a),N(t,e,a),l=!0},p(t,[a]){t[0]!=""?r?(r.p(t,a),a&1&&C(r,1)):(r=we(t),r.c(),C(r,1),r.m(e.parentNode,e)):r&&(le(),U(r,1,1,()=>{r=null}),re())},i(t){l||(C(r),l=!0)},o(t){U(r),l=!1},d(t){t&&d(e),r&&r.d(t)}}}function De(s,e,l,r,t,a,n){try{var i=s[a](n),o=i.value}catch(u){return void l(u)}i.done?e(o):Promise.resolve(o).then(r,t)}function Ve(s){return function(){var e=this,l=arguments;return new Promise(function(r,t){var a=s.apply(e,l);function n(o){De(a,r,t,n,i,"next",o)}function i(o){De(a,r,t,n,i,"throw",o)}n(void 0)})}}function lt(s,e,l){let r,t;Fe(s,Te,V=>l(19,t=V));var a,n,i,o;let{film:u=""}=e;var g,c,f=[],_="",j="",m,k=[{id:"planned",label:"Буду смотреть"},{id:"view",label:"Смотрю"}];function F(V){l(3,_=V)}function P(V,S){return H.apply(this,arguments)}function H(){return H=Ve(function*(V,S){!S&&c&&(yield Z.collection("lists").delete(c.id));var b={user:Z.authStore.model.id,film_id:V,status:S};c&&S&&(yield Z.collection("lists").update(c.id,b)),!c&&S&&(yield Z.collection("lists").create(b)),c=yield Z.collection("lists").getFullList({filter:'film_id = "'+m.id+'"'}),c=c[0]}),H.apply(this,arguments)}Re(Ve(function*(){var V;l(5,m=Object.fromEntries(t.url.searchParams)),l(0,u=yield Oe(m.id)),Ke.add(u),l(2,f=[{name:"Alloha",iframe:"https://attractive-as.allarknow.online/?token=a3fd119d8a9418f6c3f6a7ae628a41&kp="},{name:"Collaps",iframe:"https://api.tobaco.ws/embed/kp/"},{name:"VideoCDN",iframe:"https://49442664434375553.svetacdn.in/sZfbdItt5jeX?kp_id="}]),l(3,_=f[0].iframe);var S=yield fetch("https://kinobox.tv/api/players?kinopoisk="+m.id).then($=>$.json());S=S.filter($=>{if($.source=="Kodik"&&$.iframeUrl)return!0})[0],(V=S)!=null&&V.source&&l(2,f=[...f,{name:S.source,iframe:S.iframeUrl}]);try{if(l(1,g=Z.authStore.isValid),g){var b;c=yield Z.collection("lists").getFullList({filter:'film_id = "'+m.id+'"'}),c=c[0],l(4,j=(b=c)==null?void 0:b.status)}}catch{}}));function G(V){j=V,l(4,j)}const T=()=>P(m.id,j),M=V=>F(V.iframe);return s.$$set=V=>{"film"in V&&l(0,u=V.film)},s.$$.update=()=>{s.$$.dirty&15361&&l(6,r={score:(l(10,a=u)==null?void 0:a.ratingKinopoisk)||(l(11,n=u)==null?void 0:n.ratingImdb),platform:l(12,i=u)!=null&&i.ratingKinopoisk?"Кинопоиск":l(13,o=u)!=null&&o.ratingImdb?"IMDB":""})},[u,g,f,_,j,m,r,k,F,P,a,n,i,o,G,T,M]}class rt extends x{constructor(e){super(),ee(this,e,lt,tt,q,{film:0})}}function st(s){let e,l;return e=new qe({props:{left:!0}}),{c(){O(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,t){K(e,r,t),l=!0},p:J,i(r){l||(C(e.$$.fragment,r),l=!0)},o(r){U(e.$$.fragment,r),l=!1},d(r){R(e,r)}}}function nt(s){let e,l,r,t,a,n=(s[0]??"")+"",i,o,u=(s[1]??"")+"",g,c;return r=new Pe({props:{title:"Назад",nav:!0,vibro:!0,dark:!0,circle:!0,$$slots:{default:[st]},$$scope:{ctx:s}}}),r.$on("click",s[2]),{c(){e=w("section"),l=w("div"),O(r.$$.fragment),t=B(),a=w("h2"),i=Q(n),o=w("span"),g=Q(u),this.h()},l(f){e=E(f,"SECTION",{class:!0});var _=I(e);l=E(_,"DIV",{class:!0});var j=I(l);z(r.$$.fragment,j),j.forEach(d),t=L(_),a=E(_,"H2",{class:!0});var m=I(a);i=W(m,n),o=E(m,"SPAN",{class:!0});var k=I(o);g=W(k,u),k.forEach(d),m.forEach(d),_.forEach(d),this.h()},h(){h(l,"class","back svelte-4j2yli"),h(o,"class","svelte-4j2yli"),h(a,"class","svelte-4j2yli"),h(e,"class","svelte-4j2yli")},m(f,_){N(f,e,_),v(e,l),K(r,l,null),v(e,t),v(e,a),v(a,i),v(a,o),v(o,g),c=!0},p(f,[_]){const j={};_&8&&(j.$$scope={dirty:_,ctx:f}),r.$set(j),(!c||_&1)&&n!==(n=(f[0]??"")+"")&&Y(i,n),(!c||_&2)&&u!==(u=(f[1]??"")+"")&&Y(g,u)},i(f){c||(C(r.$$.fragment,f),c=!0)},o(f){U(r.$$.fragment,f),c=!1},d(f){f&&d(e),R(r)}}}function at(s,e,l){let{title:r=""}=e,{year:t=""}=e;const a=()=>history.go(-2);return s.$$set=n=>{"title"in n&&l(0,r=n.title),"year"in n&&l(1,t=n.year)},[r,t,a]}class it extends x{constructor(e){super(),ee(this,e,at,nt,q,{title:0,year:1})}}function ot(s){var c,f,_,j;let e,l,r,t,a,n,i,o;l=new it({props:{title:((c=s[0])==null?void 0:c.nameRu)||((f=s[0])==null?void 0:f.nameEn)||((_=s[0])==null?void 0:_.nameOriginal),year:(j=s[0])==null?void 0:j.year}});function u(m){s[1](m)}let g={};return s[0]!==void 0&&(g.film=s[0]),t=new rt({props:g}),Ue.push(()=>Ne(t,"film",u)),i=new ze({props:{type:"recomends"}}),{c(){e=w("div"),O(l.$$.fragment),r=B(),O(t.$$.fragment),n=B(),O(i.$$.fragment),this.h()},l(m){e=E(m,"DIV",{class:!0});var k=I(e);z(l.$$.fragment,k),r=L(k),z(t.$$.fragment,k),n=L(k),z(i.$$.fragment,k),k.forEach(d),this.h()},h(){h(e,"class","page-watch svelte-3zznia")},m(m,k){N(m,e,k),K(l,e,null),v(e,r),K(t,e,null),v(e,n),K(i,e,null),o=!0},p(m,[k]){var H,G,T,M;const F={};k&1&&(F.title=((H=m[0])==null?void 0:H.nameRu)||((G=m[0])==null?void 0:G.nameEn)||((T=m[0])==null?void 0:T.nameOriginal)),k&1&&(F.year=(M=m[0])==null?void 0:M.year),l.$set(F);const P={};!a&&k&1&&(a=!0,P.film=m[0],je(()=>a=!1)),t.$set(P)},i(m){o||(C(l.$$.fragment,m),C(t.$$.fragment,m),C(i.$$.fragment,m),o=!0)},o(m){U(l.$$.fragment,m),U(t.$$.fragment,m),U(i.$$.fragment,m),o=!1},d(m){m&&d(e),R(l),R(t),R(i)}}}function ct(s,e,l){var r;function t(a){r=a,l(0,r)}return[r,t]}class ft extends x{constructor(e){super(),ee(this,e,ct,ot,q,{})}}function ut(s){let e,l;return e=new ft({}),{c(){O(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,t){K(e,r,t),l=!0},p:J,i(r){l||(C(e.$$.fragment,r),l=!0)},o(r){U(e.$$.fragment,r),l=!1},d(r){R(e,r)}}}class $t extends x{constructor(e){super(),ee(this,e,null,ut,q,{})}}export{$t as component};
