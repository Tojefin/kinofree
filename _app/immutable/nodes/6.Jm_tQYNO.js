import{s as le,n as U,o as ue,b as me,f as ce,c as pe}from"../chunks/scheduler.hW0JTbzp.js";import{S as re,i as ne,e as v,k as V,s as D,t as C,c as k,a as b,l as F,d as p,f as A,b as j,n as g,g as y,h as $,p as H,j as Y,u as N,v as O,w as J,C as de,A as _e,m as fe,o as te}from"../chunks/index.JTGI62FI.js";import{B as Q,A as $e,H as he,F as ge}from"../chunks/watchPlayer.svelte_svelte_type_style_lang.eI6BlbnP.js";import{g as ve}from"../chunks/getFilm.5i6kqxt0.js";import{a as ke}from"../chunks/entry.AP7iwsWC.js";import{p as be}from"../chunks/stores.MjHbXv5K.js";function we(s){let e=Date.now(),t={film:s,time:e};localStorage.setItem("last_film",JSON.stringify(t))}function Ie(s){let e=JSON.parse(localStorage.getItem("watch_history"));e||(e=[]);let t=e.filter(a=>a.kinopoiskId==s.kinopoiskId)[0];if(t){let a=e.indexOf(t);e.splice(a,1)}e.unshift(s),e.length>24&&e.pop(),localStorage.setItem("watch_history",JSON.stringify(e))}function ye(s){let e,t;return e=new $e({props:{left:!0}}),{c(){V(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,l){H(e,a,l),t=!0},p:U,i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){O(e.$$.fragment,a),t=!1},d(a){J(e,a)}}}function Ee(s){let e,t,a,l,i,n,f,d,r;return a=new Q({props:{nav:!0,vibro:!0,dark:!0,circle:!0,$$slots:{default:[ye]},$$scope:{ctx:s}}}),a.$on("click",s[2]),{c(){e=v("section"),t=v("div"),V(a.$$.fragment),l=D(),i=v("h2"),n=C(s[0]),f=v("span"),d=C(s[1]),this.h()},l(o){e=k(o,"SECTION",{class:!0});var _=b(e);t=k(_,"DIV",{class:!0});var E=b(t);F(a.$$.fragment,E),E.forEach(p),l=A(_),i=k(_,"H2",{class:!0});var w=b(i);n=j(w,s[0]),f=k(w,"SPAN",{class:!0});var u=b(f);d=j(u,s[1]),u.forEach(p),w.forEach(p),_.forEach(p),this.h()},h(){g(t,"class","back svelte-4j2yli"),g(f,"class","svelte-4j2yli"),g(i,"class","svelte-4j2yli"),g(e,"class","svelte-4j2yli")},m(o,_){y(o,e,_),$(e,t),H(a,t,null),$(e,l),$(e,i),$(i,n),$(i,f),$(f,d),r=!0},p(o,[_]){const E={};_&8&&(E.$$scope={dirty:_,ctx:o}),a.$set(E),(!r||_&1)&&Y(n,o[0]),(!r||_&2)&&Y(d,o[1])},i(o){r||(N(a.$$.fragment,o),r=!0)},o(o){O(a.$$.fragment,o),r=!1},d(o){o&&p(e),J(a)}}}function Se(s,e,t){let{title:a=""}=e,{year:l=""}=e;const i=()=>window.history.back();return s.$$set=n=>{"title"in n&&t(0,a=n.title),"year"in n&&t(1,l=n.year)},[a,l,i]}class qe extends re{constructor(e){super(),ne(this,e,Se,Ee,le,{title:0,year:1})}}function De(s){let e,t,a,l,i,n,f,d,r,o=(s[0].description||"Описание не найдено")+"",_,E,w,u,m,G="Плееры",T,I,S,L,q,ae,B,se,M,X;function oe(c,h){return c[3].score>0?Oe:Ne}let x=oe(s),P=x(s);return S=new Q({props:{toggle:!0,active:s[2]=="alpha",$$slots:{default:[Pe]},$$scope:{ctx:s}}}),S.$on("click",s[7]),q=new Q({props:{toggle:!0,active:s[2]=="beta",$$slots:{default:[Ce]},$$scope:{ctx:s}}}),q.$on("click",s[8]),B=new Q({props:{toggle:!0,active:s[2]=="gamma",$$slots:{default:[je]},$$scope:{ctx:s}}}),B.$on("click",s[9]),M=new Q({props:{toggle:!0,active:s[2]=="delta",$$slots:{default:[Ve]},$$scope:{ctx:s}}}),M.$on("click",s[10]),{c(){e=v("div"),t=v("iframe"),l=D(),i=v("aside"),n=v("div"),f=v("div"),P.c(),d=D(),r=v("p"),_=C(o),E=D(),w=v("div"),u=v("div"),m=v("h4"),m.textContent=G,T=D(),I=v("div"),V(S.$$.fragment),L=D(),V(q.$$.fragment),ae=D(),V(B.$$.fragment),se=D(),V(M.$$.fragment),this.h()},l(c){e=k(c,"DIV",{class:!0});var h=b(e);t=k(h,"IFRAME",{title:!0,src:!0,class:!0}),b(t).forEach(p),h.forEach(p),l=A(c),i=k(c,"ASIDE",{class:!0});var R=b(i);n=k(R,"DIV",{class:!0});var K=b(n);f=k(K,"DIV",{});var Z=b(f);P.l(Z),Z.forEach(p),d=A(K),r=k(K,"P",{class:!0});var z=b(r);_=j(z,o),z.forEach(p),K.forEach(p),E=A(R),w=k(R,"DIV",{class:!0});var ie=b(w);u=k(ie,"DIV",{class:!0});var ee=b(u);m=k(ee,"H4",{class:!0,"data-svelte-h":!0}),fe(m)!=="svelte-1y64ufn"&&(m.textContent=G),T=A(ee),I=k(ee,"DIV",{class:!0});var W=b(I);F(S.$$.fragment,W),L=A(W),F(q.$$.fragment,W),ae=A(W),F(B.$$.fragment,W),se=A(W),F(M.$$.fragment,W),W.forEach(p),ee.forEach(p),ie.forEach(p),R.forEach(p),this.h()},h(){g(t,"title","player"),t.allowFullscreen="true",ce(t.src,a=""+(s[4][s[2]]+s[0].kinopoiskId))||g(t,"src",a),g(t,"class","svelte-f7qkdt"),g(e,"class","player svelte-f7qkdt"),g(r,"class","svelte-f7qkdt"),g(n,"class","info svelte-f7qkdt"),g(m,"class","svelte-f7qkdt"),g(I,"class","svelte-f7qkdt"),g(u,"class","sources svelte-f7qkdt"),g(w,"class","actions svelte-f7qkdt"),g(i,"class","svelte-f7qkdt")},m(c,h){y(c,e,h),$(e,t),s[6](t),y(c,l,h),y(c,i,h),$(i,n),$(n,f),P.m(f,null),$(n,d),$(n,r),$(r,_),$(i,E),$(i,w),$(w,u),$(u,m),$(u,T),$(u,I),H(S,I,null),$(I,L),H(q,I,null),$(I,ae),H(B,I,null),$(I,se),H(M,I,null),X=!0},p(c,h){(!X||h&5&&!ce(t.src,a=""+(c[4][c[2]]+c[0].kinopoiskId)))&&g(t,"src",a),x===(x=oe(c))&&P?P.p(c,h):(P.d(1),P=x(c),P&&(P.c(),P.m(f,null))),(!X||h&1)&&o!==(o=(c[0].description||"Описание не найдено")+"")&&Y(_,o);const R={};h&4&&(R.active=c[2]=="alpha"),h&4096&&(R.$$scope={dirty:h,ctx:c}),S.$set(R);const K={};h&4&&(K.active=c[2]=="beta"),h&4096&&(K.$$scope={dirty:h,ctx:c}),q.$set(K);const Z={};h&4&&(Z.active=c[2]=="gamma"),h&4096&&(Z.$$scope={dirty:h,ctx:c}),B.$set(Z);const z={};h&4&&(z.active=c[2]=="delta"),h&4096&&(z.$$scope={dirty:h,ctx:c}),M.$set(z)},i(c){X||(N(S.$$.fragment,c),N(q.$$.fragment,c),N(B.$$.fragment,c),N(M.$$.fragment,c),X=!0)},o(c){O(S.$$.fragment,c),O(q.$$.fragment,c),O(B.$$.fragment,c),O(M.$$.fragment,c),X=!1},d(c){c&&(p(e),p(l),p(i)),s[6](null),P.d(),J(S),J(q),J(B),J(M)}}}function Ae(s){let e;return{c(){e=C("Загрузка ...")},l(t){e=j(t,"Загрузка ...")},m(t,a){y(t,e,a)},p:U,i:U,o:U,d(t){t&&p(e)}}}function Ne(s){let e,t="Рейтинг не найден";return{c(){e=v("span"),e.textContent=t,this.h()},l(a){e=k(a,"SPAN",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1r1ha9q"&&(e.textContent=t),this.h()},h(){g(e,"class","svelte-f7qkdt")},m(a,l){y(a,e,l)},p:U,d(a){a&&p(e)}}}function Oe(s){let e,t=s[3].platform+"",a,l,i,n,f=s[3].score+"",d;return{c(){e=v("span"),a=C(t),l=C(":"),i=D(),n=v("mark"),d=C(f),this.h()},l(r){e=k(r,"SPAN",{class:!0});var o=b(e);a=j(o,t),l=j(o,":"),o.forEach(p),i=A(r),n=k(r,"MARK",{class:!0});var _=b(n);d=j(_,f),_.forEach(p),this.h()},h(){g(e,"class","svelte-f7qkdt"),g(n,"class","svelte-f7qkdt"),te(n,"okey",s[3].score>3.9&&s[3].score<7),te(n,"bad",s[3].score<4)},m(r,o){y(r,e,o),$(e,a),$(e,l),y(r,i,o),y(r,n,o),$(n,d)},p(r,o){o&8&&t!==(t=r[3].platform+"")&&Y(a,t),o&8&&f!==(f=r[3].score+"")&&Y(d,f),o&8&&te(n,"okey",r[3].score>3.9&&r[3].score<7),o&8&&te(n,"bad",r[3].score<4)},d(r){r&&(p(e),p(i),p(n))}}}function Pe(s){let e;return{c(){e=C("Alpha")},l(t){e=j(t,"Alpha")},m(t,a){y(t,e,a)},d(t){t&&p(e)}}}function Ce(s){let e;return{c(){e=C("Beta")},l(t){e=j(t,"Beta")},m(t,a){y(t,e,a)},d(t){t&&p(e)}}}function je(s){let e;return{c(){e=C("Gamma")},l(t){e=j(t,"Gamma")},m(t,a){y(t,e,a)},d(t){t&&p(e)}}}function Ve(s){let e;return{c(){e=C("Delta")},l(t){e=j(t,"Delta")},m(t,a){y(t,e,a)},d(t){t&&p(e)}}}function Fe(s){let e,t,a,l,i;const n=[Ae,De],f=[];function d(r,o){return r[0]?1:0}return a=d(s),l=f[a]=n[a](s),{c(){e=v("section"),t=v("div"),l.c(),this.h()},l(r){e=k(r,"SECTION",{class:!0});var o=b(e);t=k(o,"DIV",{class:!0});var _=b(t);l.l(_),_.forEach(p),o.forEach(p),this.h()},h(){g(t,"class","box svelte-f7qkdt"),g(e,"class","svelte-f7qkdt")},m(r,o){y(r,e,o),$(e,t),f[a].m(t,null),i=!0},p(r,[o]){let _=a;a=d(r),a===_?f[a].p(r,o):(de(),O(f[_],1,1,()=>{f[_]=null}),_e(),l=f[a],l?l.p(r,o):(l=f[a]=n[a](r),l.c()),N(l,1),l.m(t,null))},i(r){i||(N(l),i=!0)},o(r){O(l),i=!1},d(r){r&&p(e),f[a].d()}}}function He(s,e,t){let a,{film:l}=e,i,n={alpha:"https://voidboost.tv/embed/",beta:"https://polati.newplayjj.com:9443/?token=a3fd119d8a9418f6c3f6a7ae628a41&kp=",gamma:"https://api.framprox.ws/embed/kp/",delta:"//49442664434375553.svetacdn.in/sZfbdItt5jeX?kp_id="},f="alpha";function d(m){t(2,f=m),localStorage.setItem("last_active_player",JSON.stringify(m))}function r(){let m=JSON.parse(localStorage.getItem("last_active_player"));m||(localStorage.setItem("last_active_player",JSON.stringify("alpha")),m="alpha"),d(m)}ue(()=>{r()});function o(m){me[m?"unshift":"push"](()=>{i=m,t(1,i)})}const _=()=>d("alpha"),E=()=>d("beta"),w=()=>d("gamma"),u=()=>d("delta");return s.$$set=m=>{"film"in m&&t(0,l=m.film)},s.$$.update=()=>{s.$$.dirty&1&&t(3,a={score:(l==null?void 0:l.ratingKinopoisk)||(l==null?void 0:l.ratingImdb),platform:l!=null&&l.ratingKinopoisk?"Кинопоиск":l!=null&&l.ratingImdb?"IMDB":""})},[l,i,f,a,n,d,o,_,E,w,u]}class Je extends re{constructor(e){super(),ne(this,e,He,Fe,le,{film:0})}}function Be(s){var o,_,E,w;let e,t,a,l,i,n,f,d,r;return t=new he({}),l=new qe({props:{title:((o=s[0])==null?void 0:o.nameRu)||((_=s[0])==null?void 0:_.nameEn)||((E=s[0])==null?void 0:E.nameOriginal),year:(w=s[0])==null?void 0:w.year}}),n=new Je({props:{film:s[0]}}),d=new ge({}),{c(){e=v("div"),V(t.$$.fragment),a=D(),V(l.$$.fragment),i=D(),V(n.$$.fragment),f=D(),V(d.$$.fragment),this.h()},l(u){e=k(u,"DIV",{class:!0});var m=b(e);F(t.$$.fragment,m),a=A(m),F(l.$$.fragment,m),i=A(m),F(n.$$.fragment,m),f=A(m),F(d.$$.fragment,m),m.forEach(p),this.h()},h(){g(e,"class","page-main svelte-h7c1f0")},m(u,m){y(u,e,m),H(t,e,null),$(e,a),H(l,e,null),$(e,i),H(n,e,null),$(e,f),H(d,e,null),r=!0},p(u,[m]){var I,S,L,q;const G={};m&1&&(G.title=((I=u[0])==null?void 0:I.nameRu)||((S=u[0])==null?void 0:S.nameEn)||((L=u[0])==null?void 0:L.nameOriginal)),m&1&&(G.year=(q=u[0])==null?void 0:q.year),l.$set(G);const T={};m&1&&(T.film=u[0]),n.$set(T)},i(u){r||(N(t.$$.fragment,u),N(l.$$.fragment,u),N(n.$$.fragment,u),N(d.$$.fragment,u),r=!0)},o(u){O(t.$$.fragment,u),O(l.$$.fragment,u),O(n.$$.fragment,u),O(d.$$.fragment,u),r=!1},d(u){u&&p(e),J(t),J(l),J(n),J(d)}}}function Me(s,e,t){let a;pe(s,be,n=>t(2,a=n));let l,i;return ke(async()=>{l=Object.fromEntries(a.url.searchParams),t(0,i=await ve(l.id)),Ie(i),we(i)}),[i]}class Xe extends re{constructor(e){super(),ne(this,e,Me,Be,le,{})}}export{Xe as component};
