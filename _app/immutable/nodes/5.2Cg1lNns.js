import{s as I,n as P,c as x}from"../chunks/scheduler.hW0JTbzp.js";import{S as R,i as B,e as y,k as $,s as v,c as S,a as j,l as u,d as _,f as k,n as E,g as H,h as w,p,u as h,v as g,w as d}from"../chunks/index.JTGI62FI.js";import{B as A,A as C,H as D,F as O}from"../chunks/watchPlayer.svelte_svelte_type_style_lang.43-HhcFR.js";import{o as N}from"../chunks/getFilm.5i6kqxt0.js";import{a as U}from"../chunks/entry.mM44k8B3.js";import{p as V}from"../chunks/stores.aBeRfg2I.js";import{S as q}from"../chunks/searchBar.F_GkGy-4.js";import{R as L}from"../chunks/resultCard.31IbsfBf.js";let T="https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword";async function z(l,e=1){return l?await(await fetch(`${T}?keyword=${l}&page=${e}`,N)).json():[]}let G="https://kinopoiskapiunofficial.tech/api/v2.2/films/collections";async function J(l=1){return await(await fetch(`${G}?page=${l}`,N)).json()}function K(l){let e,t;return e=new C({props:{left:!0}}),{c(){$(e.$$.fragment)},l(r){u(e.$$.fragment,r)},m(r,s){p(e,r,s),t=!0},p:P,i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){d(e,r)}}}function M(l){let e,t,r,s,c,i;return r=new A({props:{title:"Назад",nav:!0,vibro:!0,dark:!0,circle:!0,$$slots:{default:[K]},$$scope:{ctx:l}}}),r.$on("click",l[0]),c=new q({}),{c(){e=y("section"),t=y("div"),$(r.$$.fragment),s=v(),$(c.$$.fragment),this.h()},l(n){e=S(n,"SECTION",{class:!0});var a=j(e);t=S(a,"DIV",{class:!0});var m=j(t);u(r.$$.fragment,m),m.forEach(_),s=k(a),u(c.$$.fragment,a),a.forEach(_),this.h()},h(){E(t,"class","back svelte-vll3dj"),E(e,"class","svelte-vll3dj")},m(n,a){H(n,e,a),w(e,t),p(r,t,null),w(e,s),p(c,e,null),i=!0},p(n,[a]){const m={};a&2&&(m.$$scope={dirty:a,ctx:n}),r.$set(m)},i(n){i||(h(r.$$.fragment,n),h(c.$$.fragment,n),i=!0)},o(n){g(r.$$.fragment,n),g(c.$$.fragment,n),i=!1},d(n){n&&_(e),d(r),d(c)}}}function Q(l){return[()=>history.back()]}class W extends R{constructor(e){super(),B(this,e,Q,M,I,{})}}function X(l){let e,t,r,s,c,i,n,a,m;return t=new D({}),s=new W({}),i=new L({props:{list:l[0],lable:l[1],nothing:{title:"Ничего не найдено",text:"Попробуйте другой запрос для поиска"}}}),a=new O({}),{c(){e=y("div"),$(t.$$.fragment),r=v(),$(s.$$.fragment),c=v(),$(i.$$.fragment),n=v(),$(a.$$.fragment),this.h()},l(o){e=S(o,"DIV",{class:!0});var f=j(e);u(t.$$.fragment,f),r=k(f),u(s.$$.fragment,f),c=k(f),u(i.$$.fragment,f),n=k(f),u(a.$$.fragment,f),f.forEach(_),this.h()},h(){E(e,"class","page-main svelte-h7c1f0")},m(o,f){H(o,e,f),p(t,e,null),w(e,r),p(s,e,null),w(e,c),p(i,e,null),w(e,n),p(a,e,null),m=!0},p(o,[f]){const b={};f&1&&(b.list=o[0]),f&2&&(b.lable=o[1]),i.$set(b)},i(o){m||(h(t.$$.fragment,o),h(s.$$.fragment,o),h(i.$$.fragment,o),h(a.$$.fragment,o),m=!0)},o(o){g(t.$$.fragment,o),g(s.$$.fragment,o),g(i.$$.fragment,o),g(a.$$.fragment,o),m=!1},d(o){o&&_(e),d(t),d(s),d(i),d(a)}}}let F=1;function Y(l,e,t){let r;x(l,V,a=>t(3,r=a));let s,c,i="";async function n(){if(s.key){let a=await z(s.key,F);t(0,c=a.films),t(1,i="Вот что нашли")}if(s.popular==""){let a=await J(F);t(0,c=a.items),t(1,i="Популярное")}}return U(async()=>{s=Object.fromEntries(r.url.searchParams),t(0,c=void 0),await n()}),[c,i]}class ie extends R{constructor(e){super(),B(this,e,Y,X,I,{})}}export{ie as component};
