import{s as R,n as Q,b as X}from"../chunks/scheduler.hW0JTbzp.js";import{S as j,i as q,e as S,k as b,s as N,c as E,a as D,l as k,d as _,f as C,m as Y,n as I,g as V,h as p,p as w,r as U,u as d,C as Z,v,A as x,w as y,t as z,b as G}from"../chunks/index.JTGI62FI.js";import{a as K,g as tt}from"../chunks/entry.4fWyp95Y.js";import{B,A as et,H as rt,F as st}from"../chunks/watchPlayer.svelte_svelte_type_style_lang.T7PQDOPQ.js";import{D as nt,R as at}from"../chunks/resultCard.vOC3w-Eu.js";function M(){let n=JSON.parse(localStorage.getItem("watch_history"));return n||(localStorage.setItem("watch_history",JSON.stringify([])),n=[]),n}function lt(n){let t,e;return t=new et({props:{left:!0}}),{c(){b(t.$$.fragment)},l(r){k(t.$$.fragment,r)},m(r,s){w(t,r,s),e=!0},p:Q,i(r){e||(d(t.$$.fragment,r),e=!0)},o(r){v(t.$$.fragment,r),e=!1},d(r){y(t,r)}}}function ot(n){let t;return{c(){t=z("История")},l(e){t=G(e,"История")},m(e,r){V(e,t,r)},d(e){e&&_(t)}}}function T(n){let t,e,r,s,g,o;return e=new B({props:{circle:!0,dark:!0,vibro:!0,$$slots:{default:[it]},$$scope:{ctx:n}}}),{c(){t=S("button"),b(e.$$.fragment),r=z(`
				Очистить список «История»`),this.h()},l(f){t=E(f,"BUTTON",{class:!0});var i=D(t);k(e.$$.fragment,i),r=G(i,`
				Очистить список «История»`),i.forEach(_),this.h()},h(){I(t,"class","svelte-l6pfh9")},m(f,i){V(f,t,i),w(e,t,null),p(t,r),s=!0,g||(o=U(t,"click",n[4]),g=!0)},p(f,i){const u={};i&512&&(u.$$scope={dirty:i,ctx:f}),e.$set(u)},i(f){s||(d(e.$$.fragment,f),s=!0)},o(f){v(e.$$.fragment,f),s=!1},d(f){f&&_(t),y(e),g=!1,o()}}}function it(n){let t,e;return t=new nt({}),{c(){b(t.$$.fragment)},l(r){k(t.$$.fragment,r)},m(r,s){w(t,r,s),e=!0},i(r){e||(d(t.$$.fragment,r),e=!0)},o(r){v(t.$$.fragment,r),e=!1},d(r){y(t,r)}}}function ft(n){let t,e,r,s,g,o,f="Профиль",i,u,a,l,$,A,W,F;s=new B({props:{nav:!0,vibro:!0,dark:!0,circle:!0,$$slots:{default:[lt]},$$scope:{ctx:n}}}),s.$on("click",n[6]),l=new B({props:{toggle:!0,active:n[0]=="history",$$slots:{default:[ot]},$$scope:{ctx:n}}}),l.$on("click",n[7]);let c=n[0]=="history"&&n[2].length&&T(n);return{c(){t=S("section"),e=S("div"),r=S("div"),b(s.$$.fragment),g=N(),o=S("h2"),o.textContent=f,i=N(),u=S("div"),a=S("nav"),b(l.$$.fragment),$=N(),c&&c.c(),this.h()},l(m){t=E(m,"SECTION",{class:!0});var h=D(t);e=E(h,"DIV",{class:!0});var L=D(e);r=E(L,"DIV",{class:!0});var H=D(r);k(s.$$.fragment,H),H.forEach(_),g=C(L),o=E(L,"H2",{class:!0,"data-svelte-h":!0}),Y(o)!=="svelte-12joxbi"&&(o.textContent=f),L.forEach(_),i=C(h),u=E(h,"DIV",{class:!0});var O=D(u);a=E(O,"NAV",{class:!0});var J=D(a);k(l.$$.fragment,J),J.forEach(_),$=C(O),c&&c.l(O),O.forEach(_),h.forEach(_),this.h()},h(){I(r,"class","back svelte-l6pfh9"),I(o,"class","svelte-l6pfh9"),I(e,"class","top svelte-l6pfh9"),I(a,"class","svelte-l6pfh9"),I(u,"class","bottom svelte-l6pfh9"),I(t,"class","svelte-l6pfh9")},m(m,h){V(m,t,h),p(t,e),p(e,r),w(s,r,null),p(e,g),p(e,o),p(t,i),p(t,u),p(u,a),w(l,a,null),n[8](a),p(u,$),c&&c.m(u,null),A=!0,W||(F=U(a,"scroll",n[5]),W=!0)},p(m,[h]){const L={};h&512&&(L.$$scope={dirty:h,ctx:m}),s.$set(L);const H={};h&1&&(H.active=m[0]=="history"),h&512&&(H.$$scope={dirty:h,ctx:m}),l.$set(H),m[0]=="history"&&m[2].length?c?(c.p(m,h),h&5&&d(c,1)):(c=T(m),c.c(),d(c,1),c.m(u,null)):c&&(Z(),v(c,1,1,()=>{c=null}),x())},i(m){A||(d(s.$$.fragment,m),d(l.$$.fragment,m),d(c),A=!0)},o(m){v(s.$$.fragment,m),v(l.$$.fragment,m),v(c),A=!1},d(m){m&&_(t),y(s),y(l),n[8](null),c&&c.d(),W=!1,F()}}}function ct(n,t,e){let{activeList:r="history"}=t,s,g=[];function o($){e(0,r=$)}function f(){localStorage.setItem("watch_history",JSON.stringify([])),tt("")}function i(){let $=s.scrollLeft/(s.scrollWidth-s.clientWidth);$<.01&&e(1,s.style="mask-image: linear-gradient(90deg,transparent 0%,rgba(0, 0, 0, 1) 0%,rgba(0, 0, 0, 1) 90%,transparent 100%)",s),$>.01&&$<.99&&e(1,s.style="mask-image: linear-gradient(90deg,transparent 0%,rgba(0, 0, 0, 1) 10%,rgba(0, 0, 0, 1) 90%,transparent 100%)",s),$>.99&&e(1,s.style="mask-image: linear-gradient(90deg,transparent 0%,rgba(0, 0, 0, 1) 10%,rgba(0, 0, 0, 1) 100%,transparent 100%)",s)}K(()=>{e(2,g=M())});const u=()=>history.back(),a=()=>o("history");function l($){X[$?"unshift":"push"](()=>{s=$,e(1,s)})}return n.$$set=$=>{"activeList"in $&&e(0,r=$.activeList)},[r,s,g,o,f,i,u,a,l]}class ut extends j{constructor(t){super(),q(this,t,ct,ft,R,{activeList:0})}}function $t(n){let t,e,r,s,g,o,f,i,u;return e=new rt({}),s=new ut({props:{activeList:P}}),o=new at({props:{lable:null,list:n[0],canDelete:P=="history",nothing:{title:"История пуста",text:"Здесь будет список фильмов, которые вы смотрели на своём устройстве"}}}),i=new st({}),{c(){t=S("div"),b(e.$$.fragment),r=N(),b(s.$$.fragment),g=N(),b(o.$$.fragment),f=N(),b(i.$$.fragment),this.h()},l(a){t=E(a,"DIV",{class:!0});var l=D(t);k(e.$$.fragment,l),r=C(l),k(s.$$.fragment,l),g=C(l),k(o.$$.fragment,l),f=C(l),k(i.$$.fragment,l),l.forEach(_),this.h()},h(){I(t,"class","page-main svelte-h7c1f0")},m(a,l){V(a,t,l),w(e,t,null),p(t,r),w(s,t,null),p(t,g),w(o,t,null),p(t,f),w(i,t,null),u=!0},p(a,[l]){const $={};l&1&&($.list=a[0]),o.$set($)},i(a){u||(d(e.$$.fragment,a),d(s.$$.fragment,a),d(o.$$.fragment,a),d(i.$$.fragment,a),u=!0)},o(a){v(e.$$.fragment,a),v(s.$$.fragment,a),v(o.$$.fragment,a),v(i.$$.fragment,a),u=!1},d(a){a&&_(t),y(e),y(s),y(o),y(i)}}}let P="history";function mt(n,t,e){let r;return K(()=>{e(0,r=M())}),[r]}class vt extends j{constructor(t){super(),q(this,t,mt,$t,R,{})}}export{vt as component};
