import{s as re,n as U,o as ue,b as me,f as ce,c as pe}from"../chunks/scheduler.hW0JTbzp.js";import{S as le,i as ne,e as v,k as F,s as A,t as j,c as k,a as b,l as H,d as p,f as N,b as V,n as d,g as y,h as g,p as J,j as Y,u as O,v as P,w as B,C as _e,A as $e,m as fe,o as te}from"../chunks/index.JTGI62FI.js";import{B as Q,A as ge,H as he,F as de}from"../chunks/watchPlayer.svelte_svelte_type_style_lang.eIlf9Jfx.js";import{g as ve}from"../chunks/getFilm.5i6kqxt0.js";import{a as ke}from"../chunks/entry.fdr-Teml.js";import{p as be}from"../chunks/stores.FvTbPAuI.js";function we(s){let e=Date.now(),t={film:s,time:e};localStorage.setItem("last_film",JSON.stringify(t))}function Ie(s){let e=JSON.parse(localStorage.getItem("watch_history"));e||(e=[]);let t=e.filter(a=>a.kinopoiskId==s.kinopoiskId)[0];if(t){let a=e.indexOf(t);e.splice(a,1)}e.unshift(s),e.length>24&&e.pop(),localStorage.setItem("watch_history",JSON.stringify(e))}function ye(s){let e,t;return e=new ge({props:{left:!0}}),{c(){F(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,r){J(e,a,r),t=!0},p:U,i(a){t||(O(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Ee(s){let e,t,a,r,i,n,f,_,l;return a=new Q({props:{nav:!0,vibro:!0,dark:!0,circle:!0,$$slots:{default:[ye]},$$scope:{ctx:s}}}),a.$on("click",s[2]),{c(){e=v("section"),t=v("div"),F(a.$$.fragment),r=A(),i=v("h2"),n=j(s[0]),f=v("span"),_=j(s[1]),this.h()},l(o){e=k(o,"SECTION",{class:!0});var $=b(e);t=k($,"DIV",{class:!0});var E=b(t);H(a.$$.fragment,E),E.forEach(p),r=N($),i=k($,"H2",{class:!0});var w=b(i);n=V(w,s[0]),f=k(w,"SPAN",{class:!0});var u=b(f);_=V(u,s[1]),u.forEach(p),w.forEach(p),$.forEach(p),this.h()},h(){d(t,"class","back svelte-4j2yli"),d(f,"class","svelte-4j2yli"),d(i,"class","svelte-4j2yli"),d(e,"class","svelte-4j2yli")},m(o,$){y(o,e,$),g(e,t),J(a,t,null),g(e,r),g(e,i),g(i,n),g(i,f),g(f,_),l=!0},p(o,[$]){const E={};$&8&&(E.$$scope={dirty:$,ctx:o}),a.$set(E),(!l||$&1)&&Y(n,o[0]),(!l||$&2)&&Y(_,o[1])},i(o){l||(O(a.$$.fragment,o),l=!0)},o(o){P(a.$$.fragment,o),l=!1},d(o){o&&p(e),B(a)}}}function Se(s,e,t){let{title:a=""}=e,{year:r=""}=e;const i=()=>window.history.back();return s.$$set=n=>{"title"in n&&t(0,a=n.title),"year"in n&&t(1,r=n.year)},[a,r,i]}class De extends le{constructor(e){super(),ne(this,e,Se,Ee,re,{title:0,year:1})}}function Ae(s){let e,t,a,r,i,n,f,_,l,o=(s[0].description||"Описание не найдено")+"",$,E,w,u,m,G="Плееры",T,I,S,L,D,ae,M,se,R,X;function oe(c,h){return c[3].score>0?Pe:Oe}let x=oe(s),C=x(s);return S=new Q({props:{toggle:!0,active:s[2]=="alpha",$$slots:{default:[Ce]},$$scope:{ctx:s}}}),S.$on("click",s[7]),D=new Q({props:{toggle:!0,active:s[2]=="beta",$$slots:{default:[je]},$$scope:{ctx:s}}}),D.$on("click",s[8]),M=new Q({props:{toggle:!0,active:s[2]=="gamma",$$slots:{default:[Ve]},$$scope:{ctx:s}}}),M.$on("click",s[9]),R=new Q({props:{toggle:!0,active:s[2]=="delta",$$slots:{default:[Fe]},$$scope:{ctx:s}}}),R.$on("click",s[10]),{c(){e=v("div"),t=v("iframe"),r=A(),i=v("aside"),n=v("div"),f=v("div"),C.c(),_=A(),l=v("p"),$=j(o),E=A(),w=v("div"),u=v("div"),m=v("h4"),m.textContent=G,T=A(),I=v("div"),F(S.$$.fragment),L=A(),F(D.$$.fragment),ae=A(),F(M.$$.fragment),se=A(),F(R.$$.fragment),this.h()},l(c){e=k(c,"DIV",{class:!0});var h=b(e);t=k(h,"IFRAME",{title:!0,src:!0,class:!0}),b(t).forEach(p),h.forEach(p),r=N(c),i=k(c,"ASIDE",{class:!0});var q=b(i);n=k(q,"DIV",{class:!0});var K=b(n);f=k(K,"DIV",{});var Z=b(f);C.l(Z),Z.forEach(p),_=N(K),l=k(K,"P",{class:!0});var z=b(l);$=V(z,o),z.forEach(p),K.forEach(p),E=N(q),w=k(q,"DIV",{class:!0});var ie=b(w);u=k(ie,"DIV",{class:!0});var ee=b(u);m=k(ee,"H4",{class:!0,"data-svelte-h":!0}),fe(m)!=="svelte-1y64ufn"&&(m.textContent=G),T=N(ee),I=k(ee,"DIV",{class:!0});var W=b(I);H(S.$$.fragment,W),L=N(W),H(D.$$.fragment,W),ae=N(W),H(M.$$.fragment,W),se=N(W),H(R.$$.fragment,W),W.forEach(p),ee.forEach(p),ie.forEach(p),q.forEach(p),this.h()},h(){d(t,"title","player"),t.allowFullscreen="true",ce(t.src,a=""+(s[4][s[2]]+s[0].kinopoiskId))||d(t,"src",a),d(t,"class","svelte-1grxstu"),d(e,"class","player svelte-1grxstu"),d(l,"class","svelte-1grxstu"),d(n,"class","info svelte-1grxstu"),d(m,"class","svelte-1grxstu"),d(I,"class","svelte-1grxstu"),d(u,"class","sources svelte-1grxstu"),d(w,"class","actions svelte-1grxstu"),d(i,"class","svelte-1grxstu")},m(c,h){y(c,e,h),g(e,t),s[6](t),y(c,r,h),y(c,i,h),g(i,n),g(n,f),C.m(f,null),g(n,_),g(n,l),g(l,$),g(i,E),g(i,w),g(w,u),g(u,m),g(u,T),g(u,I),J(S,I,null),g(I,L),J(D,I,null),g(I,ae),J(M,I,null),g(I,se),J(R,I,null),X=!0},p(c,h){(!X||h&5&&!ce(t.src,a=""+(c[4][c[2]]+c[0].kinopoiskId)))&&d(t,"src",a),x===(x=oe(c))&&C?C.p(c,h):(C.d(1),C=x(c),C&&(C.c(),C.m(f,null))),(!X||h&1)&&o!==(o=(c[0].description||"Описание не найдено")+"")&&Y($,o);const q={};h&4&&(q.active=c[2]=="alpha"),h&4096&&(q.$$scope={dirty:h,ctx:c}),S.$set(q);const K={};h&4&&(K.active=c[2]=="beta"),h&4096&&(K.$$scope={dirty:h,ctx:c}),D.$set(K);const Z={};h&4&&(Z.active=c[2]=="gamma"),h&4096&&(Z.$$scope={dirty:h,ctx:c}),M.$set(Z);const z={};h&4&&(z.active=c[2]=="delta"),h&4096&&(z.$$scope={dirty:h,ctx:c}),R.$set(z)},i(c){X||(O(S.$$.fragment,c),O(D.$$.fragment,c),O(M.$$.fragment,c),O(R.$$.fragment,c),X=!0)},o(c){P(S.$$.fragment,c),P(D.$$.fragment,c),P(M.$$.fragment,c),P(R.$$.fragment,c),X=!1},d(c){c&&(p(e),p(r),p(i)),s[6](null),C.d(),B(S),B(D),B(M),B(R)}}}function Ne(s){let e;return{c(){e=j("Загрузка ...")},l(t){e=V(t,"Загрузка ...")},m(t,a){y(t,e,a)},p:U,i:U,o:U,d(t){t&&p(e)}}}function Oe(s){let e,t="Рейтинг не найден";return{c(){e=v("span"),e.textContent=t,this.h()},l(a){e=k(a,"SPAN",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1r1ha9q"&&(e.textContent=t),this.h()},h(){d(e,"class","svelte-1grxstu")},m(a,r){y(a,e,r)},p:U,d(a){a&&p(e)}}}function Pe(s){let e,t=s[3].platform+"",a,r,i,n,f=s[3].score+"",_;return{c(){e=v("span"),a=j(t),r=j(":"),i=A(),n=v("mark"),_=j(f),this.h()},l(l){e=k(l,"SPAN",{class:!0});var o=b(e);a=V(o,t),r=V(o,":"),o.forEach(p),i=N(l),n=k(l,"MARK",{class:!0});var $=b(n);_=V($,f),$.forEach(p),this.h()},h(){d(e,"class","svelte-1grxstu"),d(n,"class","svelte-1grxstu"),te(n,"okey",s[3].score>3.9&&s[3].score<7),te(n,"bad",s[3].score<4)},m(l,o){y(l,e,o),g(e,a),g(e,r),y(l,i,o),y(l,n,o),g(n,_)},p(l,o){o&8&&t!==(t=l[3].platform+"")&&Y(a,t),o&8&&f!==(f=l[3].score+"")&&Y(_,f),o&8&&te(n,"okey",l[3].score>3.9&&l[3].score<7),o&8&&te(n,"bad",l[3].score<4)},d(l){l&&(p(e),p(i),p(n))}}}function Ce(s){let e;return{c(){e=j("Alpha")},l(t){e=V(t,"Alpha")},m(t,a){y(t,e,a)},d(t){t&&p(e)}}}function je(s){let e;return{c(){e=j("Beta")},l(t){e=V(t,"Beta")},m(t,a){y(t,e,a)},d(t){t&&p(e)}}}function Ve(s){let e;return{c(){e=j("Gamma")},l(t){e=V(t,"Gamma")},m(t,a){y(t,e,a)},d(t){t&&p(e)}}}function Fe(s){let e;return{c(){e=j("Delta")},l(t){e=V(t,"Delta")},m(t,a){y(t,e,a)},d(t){t&&p(e)}}}function He(s){let e,t,a,r,i;const n=[Ne,Ae],f=[];function _(l,o){return l[0]?1:0}return a=_(s),r=f[a]=n[a](s),{c(){e=v("section"),t=v("div"),r.c(),this.h()},l(l){e=k(l,"SECTION",{class:!0});var o=b(e);t=k(o,"DIV",{class:!0});var $=b(t);r.l($),$.forEach(p),o.forEach(p),this.h()},h(){d(t,"class","box svelte-1grxstu"),d(e,"class","svelte-1grxstu")},m(l,o){y(l,e,o),g(e,t),f[a].m(t,null),i=!0},p(l,[o]){let $=a;a=_(l),a===$?f[a].p(l,o):(_e(),P(f[$],1,1,()=>{f[$]=null}),$e(),r=f[a],r?r.p(l,o):(r=f[a]=n[a](l),r.c()),O(r,1),r.m(t,null))},i(l){i||(O(r),i=!0)},o(l){P(r),i=!1},d(l){l&&p(e),f[a].d()}}}function Je(s,e,t){let a,{film:r}=e,i,n={alpha:"https://voidboost.tv/embed/",beta:"https://polati.newplayjj.com:9443/?token=a3fd119d8a9418f6c3f6a7ae628a41&kp=",gamma:"https://api.framprox.ws/embed/kp/",delta:"//49442664434375553.svetacdn.in/sZfbdItt5jeX?kp_id="},f="alpha";function _(m){t(2,f=m),localStorage.setItem("last_active_player",JSON.stringify(m))}function l(){let m=JSON.parse(localStorage.getItem("last_active_player"));m||(localStorage.setItem("last_active_player",JSON.stringify("alpha")),m="alpha"),_(m)}ue(()=>{l()});function o(m){me[m?"unshift":"push"](()=>{i=m,t(1,i)})}const $=()=>_("alpha"),E=()=>_("beta"),w=()=>_("gamma"),u=()=>_("delta");return s.$$set=m=>{"film"in m&&t(0,r=m.film)},s.$$.update=()=>{s.$$.dirty&1&&t(3,a={score:(r==null?void 0:r.ratingKinopoisk)||(r==null?void 0:r.ratingImdb),platform:r!=null&&r.ratingKinopoisk?"Кинопоиск":r!=null&&r.ratingImdb?"IMDB":""})},[r,i,f,a,n,_,o,$,E,w,u]}class Be extends le{constructor(e){super(),ne(this,e,Je,He,re,{film:0})}}function Me(s){var o,$,E,w;let e,t,a,r,i,n,f,_,l;return t=new he({}),r=new De({props:{title:((o=s[0])==null?void 0:o.nameRu)||(($=s[0])==null?void 0:$.nameEn)||((E=s[0])==null?void 0:E.nameOriginal),year:(w=s[0])==null?void 0:w.year}}),n=new Be({props:{film:s[0]}}),_=new de({}),{c(){e=v("div"),F(t.$$.fragment),a=A(),F(r.$$.fragment),i=A(),F(n.$$.fragment),f=A(),F(_.$$.fragment),this.h()},l(u){e=k(u,"DIV",{class:!0});var m=b(e);H(t.$$.fragment,m),a=N(m),H(r.$$.fragment,m),i=N(m),H(n.$$.fragment,m),f=N(m),H(_.$$.fragment,m),m.forEach(p),this.h()},h(){d(e,"class","page-main svelte-h7c1f0")},m(u,m){y(u,e,m),J(t,e,null),g(e,a),J(r,e,null),g(e,i),J(n,e,null),g(e,f),J(_,e,null),l=!0},p(u,[m]){var I,S,L,D;const G={};m&1&&(G.title=((I=u[0])==null?void 0:I.nameRu)||((S=u[0])==null?void 0:S.nameEn)||((L=u[0])==null?void 0:L.nameOriginal)),m&1&&(G.year=(D=u[0])==null?void 0:D.year),r.$set(G);const T={};m&1&&(T.film=u[0]),n.$set(T)},i(u){l||(O(t.$$.fragment,u),O(r.$$.fragment,u),O(n.$$.fragment,u),O(_.$$.fragment,u),l=!0)},o(u){P(t.$$.fragment,u),P(r.$$.fragment,u),P(n.$$.fragment,u),P(_.$$.fragment,u),l=!1},d(u){u&&p(e),B(t),B(r),B(n),B(_)}}}function Re(s,e,t){let a;pe(s,be,n=>t(2,a=n));let r,i;return ke(async()=>{r=Object.fromEntries(a.url.searchParams),t(0,i=await ve(r.id)),Ie(i),we(i)}),[i]}class Xe extends le{constructor(e){super(),ne(this,e,Re,Me,re,{})}}export{Xe as component};
