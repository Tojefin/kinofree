import{s as Y,a as pe,c as ge,b as y,d as m,f as h,i as H,g as _,n as Z,j as w,q as B,l as J,k as $,r as L,m as Q,z as He,D as W,L as Be,e as ce,B as Ve,a4 as Le,h as Me,x as Ae,a1 as ve,t as oe,E as Se,a2 as Ue}from"../chunks/scheduler.UmdBsXoH.js";import{S as x,i as ee,t as I,g as le,e as re,b as U,c as O,a as z,m as K,d as R,f as je}from"../chunks/index.Vbt9v2Aa.js";import{g as Fe,U as Oe}from"../chunks/ui.films.XnN_EUTG.js";import{e as fe,w as ze}from"../chunks/searchFilm.q046qK5L.js";import{a as Ke}from"../chunks/entry.3nUynXgO.js";import{U as Ne}from"../chunks/ui.button.eDEFvkPg.js";import{p as Re}from"../chunks/stores.nNJZKXi5.js";import{p as X}from"../chunks/index.3YLQEot0.js";import{A as Te}from"../chunks/arrow.68QDVyr3.js";function qe(s){let e,l;return{c(){e=pe("svg"),l=pe("path"),this.h()},l(r){e=ge(r,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var t=y(e);l=ge(t,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),y(l).forEach(m),t.forEach(m),this.h()},h(){h(l,"d","M6.66696 3.33317H5.46696C4.72022 3.33317 4.34658 3.33317 4.06136 3.4785C3.81048 3.60633 3.60665 3.81015 3.47882 4.06104C3.3335 4.34625 3.3335 4.7199 3.3335 5.46663V10.5333C3.3335 11.28 3.3335 11.6532 3.47882 11.9384C3.60665 12.1893 3.81048 12.3935 4.06136 12.5213C4.3463 12.6665 4.71949 12.6665 5.46477 12.6665H10.5356C11.2808 12.6665 11.6535 12.6665 11.9384 12.5213C12.1893 12.3935 12.3938 12.1891 12.5216 11.9382C12.6668 11.6533 12.6668 11.2805 12.6668 10.5352V9.33317M13.3335 5.99984V2.6665M13.3335 2.6665H10.0002M13.3335 2.6665L8.66683 7.33317"),h(l,"stroke","white"),h(l,"stroke-width","2"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(e,"width","16"),h(e,"height","16"),h(e,"viewBox","0 0 16 16"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(r,t){H(r,e,t),_(e,l)},p:Z,i:Z,o:Z,d(r){r&&m(e)}}}class Ge extends x{constructor(e){super(),ee(this,e,null,qe,Y,{})}}function Xe(s){let e,l,r,t,a,n,i;return{c(){e=w("label"),l=w("input"),r=B(),t=w("span"),a=J(s[1]),this.h()},l(o){e=$(o,"LABEL",{class:!0});var f=y(e);l=$(f,"INPUT",{type:!0,id:!0,class:!0}),r=L(f),t=$(f,"SPAN",{class:!0});var p=y(t);a=Q(p,s[1]),p.forEach(m),f.forEach(m),this.h()},h(){h(l,"type","checkbox"),h(l,"id",s[0]),l.checked=s[2],h(l,"class","svelte-1lfkvy"),h(t,"class","svelte-1lfkvy"),h(e,"class","checkbox svelte-1lfkvy")},m(o,f){H(o,e,f),_(e,l),_(e,r),_(e,t),_(t,a),n||(i=He(e,"input",s[3]),n=!0)},p(o,[f]){f&1&&h(l,"id",o[0]),f&4&&(l.checked=o[2]),f&2&&W(a,o[1])},i:Z,o:Z,d(o){o&&m(e),n=!1,i()}}}function Ze(s,e,l){let{id:r}=e,{label:t=""}=e,{checked:a=!1}=e;function n(i){Be.call(this,s,i)}return s.$$set=i=>{"id"in i&&l(0,r=i.id),"label"in i&&l(1,t=i.label),"checked"in i&&l(2,a=i.checked)},[r,t,a,n]}class Je extends x{constructor(e){super(),ee(this,e,Ze,Xe,Y,{id:0,label:1,checked:2})}}function ke(s,e,l){const r=s.slice();return r[4]=e[l],r}function be(s){let e,l;function r(...t){return s[2](s[4],...t)}return e=new Je({props:{id:s[4].id,label:s[4].label,checked:s[0]==s[4].id}}),e.$on("input",r),{c(){O(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},p(t,a){s=t;const n={};a&2&&(n.id=s[4].id),a&2&&(n.label=s[4].label),a&3&&(n.checked=s[0]==s[4].id),e.$set(n)},i(t){l||(I(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Qe(s){let e,l,r=fe(s[1]),t=[];for(let n=0;n<r.length;n+=1)t[n]=be(ke(s,r,n));const a=n=>U(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=ce()},l(n){for(let i=0;i<t.length;i+=1)t[i].l(n);e=ce()},m(n,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,i);H(n,e,i),l=!0},p(n,[i]){if(i&3){r=fe(n[1]);let o;for(o=0;o<r.length;o+=1){const f=ke(n,r,o);t[o]?(t[o].p(f,i),I(t[o],1)):(t[o]=be(f),t[o].c(),I(t[o],1),t[o].m(e.parentNode,e))}for(le(),o=r.length;o<t.length;o+=1)a(o);re()}},i(n){if(!l){for(let i=0;i<r.length;i+=1)I(t[i]);l=!0}},o(n){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)U(t[i]);l=!1},d(n){n&&m(e),Ve(t,n)}}}function We(s,e,l){let{options:r=[]}=e;var t=Le();let{value:a=""}=e;const n=(i,o)=>{l(0,a=o.target.checked?i.id:void 0)};return s.$$set=i=>{"options"in i&&l(1,r=i.options),"value"in i&&l(0,a=i.value)},s.$$.update=()=>{s.$$.dirty&1&&t("change",a)},[a,r,n]}class Ye extends x{constructor(e){super(),ee(this,e,We,Qe,Y,{options:1,value:0})}}function we(s,e,l){const r=s.slice();return r[20]=e[l],r}function $e(s){let e,l,r,t,a,n,i,o,f,p,c,u,g,S=(s[0].description||"Описание не найдено")+"",d,A,N,F,P,M,q="Плееры",T,C,j,k=s[6].score>0&&Ee(s),b=s[1]&&ye(s),G=fe(s[2]),D=[];for(let v=0;v<G.length;v+=1)D[v]=Ie(we(s,G,v));const Pe=v=>U(D[v],1,1,()=>{D[v]=null});return{c(){e=w("section"),l=w("div"),r=w("div"),t=w("iframe"),n=B(),i=w("aside"),o=w("div"),f=w("a"),p=w("div"),k&&k.c(),u=B(),g=w("p"),d=J(S),A=B(),N=w("div"),b&&b.c(),F=B(),P=w("div"),M=w("h4"),M.textContent=q,T=B(),C=w("div");for(let v=0;v<D.length;v+=1)D[v].c();this.h()},l(v){e=$(v,"SECTION",{class:!0});var V=y(e);l=$(V,"DIV",{class:!0});var E=y(l);r=$(E,"DIV",{class:!0});var te=y(r);t=$(te,"IFRAME",{title:!0,sandbox:!0,src:!0,class:!0}),y(t).forEach(m),te.forEach(m),n=L(E),i=$(E,"ASIDE",{class:!0});var se=y(i);o=$(se,"DIV",{class:!0});var ne=y(o);f=$(ne,"A",{href:!0,target:!0});var he=y(f);p=$(he,"DIV",{class:!0});var me=y(p);k&&k.l(me),me.forEach(m),he.forEach(m),u=L(ne),g=$(ne,"P",{class:!0});var de=y(g);d=Q(de,S),de.forEach(m),ne.forEach(m),A=L(se),N=$(se,"DIV",{class:!0});var ae=y(N);b&&b.l(ae),F=L(ae),P=$(ae,"DIV",{class:!0});var ie=y(P);M=$(ie,"H4",{class:!0,"data-svelte-h":!0}),Ae(M)!=="svelte-1y64ufn"&&(M.textContent=q),T=L(ie),C=$(ie,"DIV",{class:!0});var _e=y(C);for(let ue=0;ue<D.length;ue+=1)D[ue].l(_e);_e.forEach(m),ie.forEach(m),ae.forEach(m),se.forEach(m),E.forEach(m),V.forEach(m),this.h()},h(){h(t,"title","player"),t.allowFullscreen="true",h(t,"sandbox","allow-scripts allow-same-origin"),ve(t.src,a=""+(s[3]+s[0].kinopoiskId))||h(t,"src",a),h(t,"class","svelte-gw9230"),h(r,"class","player svelte-gw9230"),h(p,"class","rating svelte-gw9230"),h(f,"href",c=`https://www.kinopoisk.ru/film/${s[5].id}`),h(f,"target","_blank"),h(g,"class","svelte-gw9230"),h(o,"class","info svelte-gw9230"),h(M,"class","svelte-gw9230"),h(C,"class","svelte-gw9230"),h(P,"class","sources svelte-gw9230"),h(N,"class","actions svelte-gw9230"),h(i,"class","svelte-gw9230"),h(l,"class","box svelte-gw9230"),h(e,"class","svelte-gw9230")},m(v,V){H(v,e,V),_(e,l),_(l,r),_(r,t),_(l,n),_(l,i),_(i,o),_(o,f),_(f,p),k&&k.m(p,null),_(o,u),_(o,g),_(g,d),_(i,A),_(i,N),b&&b.m(N,null),_(N,F),_(N,P),_(P,M),_(P,T),_(P,C);for(let E=0;E<D.length;E+=1)D[E]&&D[E].m(C,null);j=!0},p(v,V){if((!j||V&9&&!ve(t.src,a=""+(v[3]+v[0].kinopoiskId)))&&h(t,"src",a),v[6].score>0?k?(k.p(v,V),V&64&&I(k,1)):(k=Ee(v),k.c(),I(k,1),k.m(p,null)):k&&(le(),U(k,1,1,()=>{k=null}),re()),(!j||V&32&&c!==(c=`https://www.kinopoisk.ru/film/${v[5].id}`))&&h(f,"href",c),(!j||V&1)&&S!==(S=(v[0].description||"Описание не найдено")+"")&&W(d,S),v[1]?b?(b.p(v,V),V&2&&I(b,1)):(b=ye(v),b.c(),I(b,1),b.m(N,F)):b&&(le(),U(b,1,1,()=>{b=null}),re()),V&268){G=fe(v[2]);let E;for(E=0;E<G.length;E+=1){const te=we(v,G,E);D[E]?(D[E].p(te,V),I(D[E],1)):(D[E]=Ie(te),D[E].c(),I(D[E],1),D[E].m(C,null))}for(le(),E=G.length;E<D.length;E+=1)Pe(E);re()}},i(v){if(!j){I(k),I(b);for(let V=0;V<G.length;V+=1)I(D[V]);j=!0}},o(v){U(k),U(b),D=D.filter(Boolean);for(let V=0;V<D.length;V+=1)U(D[V]);j=!1},d(v){v&&m(e),k&&k.d(),b&&b.d(),Ve(D,v)}}}function Ee(s){let e,l=s[6].score+"",r,t,a,n=s[6].platform+"",i,o,f,p;return f=new Ge({}),{c(){e=w("mark"),r=J(l),t=B(),a=w("span"),i=J(n),o=B(),O(f.$$.fragment),this.h()},l(c){e=$(c,"MARK",{class:!0});var u=y(e);r=Q(u,l),u.forEach(m),t=L(c),a=$(c,"SPAN",{class:!0});var g=y(a);i=Q(g,n),g.forEach(m),o=L(c),z(f.$$.fragment,c),this.h()},h(){h(e,"class","svelte-gw9230"),oe(e,"okey",s[6].score>3.9&&s[6].score<7),oe(e,"bad",s[6].score<4),h(a,"class","svelte-gw9230")},m(c,u){H(c,e,u),_(e,r),H(c,t,u),H(c,a,u),_(a,i),H(c,o,u),K(f,c,u),p=!0},p(c,u){(!p||u&64)&&l!==(l=c[6].score+"")&&W(r,l),(!p||u&64)&&oe(e,"okey",c[6].score>3.9&&c[6].score<7),(!p||u&64)&&oe(e,"bad",c[6].score<4),(!p||u&64)&&n!==(n=c[6].platform+"")&&W(i,n)},i(c){p||(I(f.$$.fragment,c),p=!0)},o(c){U(f.$$.fragment,c),p=!1},d(c){c&&(m(e),m(t),m(a),m(o)),R(f,c)}}}function ye(s){let e,l,r="Добавить в профиль",t,a,n,i,o;function f(c){s[14](c)}let p={options:s[7]};return s[4]!==void 0&&(p.value=s[4]),n=new Ye({props:p}),Se.push(()=>je(n,"value",f)),n.$on("change",s[15]),{c(){e=w("div"),l=w("h4"),l.textContent=r,t=B(),a=w("div"),O(n.$$.fragment),this.h()},l(c){e=$(c,"DIV",{class:!0});var u=y(e);l=$(u,"H4",{class:!0,"data-svelte-h":!0}),Ae(l)!=="svelte-1yzpk7b"&&(l.textContent=r),t=L(u),a=$(u,"DIV",{class:!0});var g=y(a);z(n.$$.fragment,g),g.forEach(m),u.forEach(m),this.h()},h(){h(l,"class","svelte-gw9230"),h(a,"class","svelte-gw9230"),h(e,"class","list svelte-gw9230")},m(c,u){H(c,e,u),_(e,l),_(e,t),_(e,a),K(n,a,null),o=!0},p(c,u){const g={};!i&&u&16&&(i=!0,g.value=c[4],Ue(()=>i=!1)),n.$set(g)},i(c){o||(I(n.$$.fragment,c),o=!0)},o(c){U(n.$$.fragment,c),o=!1},d(c){c&&m(e),R(n)}}}function xe(s){let e=s[20].name+"",l,r;return{c(){l=J(e),r=B()},l(t){l=Q(t,e),r=L(t)},m(t,a){H(t,l,a),H(t,r,a)},p(t,a){a&4&&e!==(e=t[20].name+"")&&W(l,e)},d(t){t&&(m(l),m(r))}}}function Ie(s){let e,l;function r(){return s[16](s[20])}return e=new Ne({props:{toggle:!0,active:s[3]==s[20].iframe,$$slots:{default:[xe]},$$scope:{ctx:s}}}),e.$on("click",r),{c(){O(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},p(t,a){s=t;const n={};a&12&&(n.active=s[3]==s[20].iframe),a&8388612&&(n.$$scope={dirty:a,ctx:s}),e.$set(n)},i(t){l||(I(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function et(s){let e,l,r=s[0]!=""&&$e(s);return{c(){r&&r.c(),e=ce()},l(t){r&&r.l(t),e=ce()},m(t,a){r&&r.m(t,a),H(t,e,a),l=!0},p(t,[a]){t[0]!=""?r?(r.p(t,a),a&1&&I(r,1)):(r=$e(t),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(le(),U(r,1,1,()=>{r=null}),re())},i(t){l||(I(r),l=!0)},o(t){U(r),l=!1},d(t){t&&m(e),r&&r.d(t)}}}function Ce(s,e,l,r,t,a,n){try{var i=s[a](n),o=i.value}catch(f){return void l(f)}i.done?e(o):Promise.resolve(o).then(r,t)}function De(s){return function(){var e=this,l=arguments;return new Promise(function(r,t){var a=s.apply(e,l);function n(o){Ce(a,r,t,n,i,"next",o)}function i(o){Ce(a,r,t,n,i,"throw",o)}n(void 0)})}}function tt(s,e,l){let r,t;Me(s,Re,C=>l(19,t=C));var a,n,i,o;let{film:f=""}=e;var p,c,u=[],g="",S="",d,A=[{id:"planned",label:"Буду смотреть"},{id:"view",label:"Смотрю"}];function N(C){l(3,g=C)}function F(C,j){return P.apply(this,arguments)}function P(){return P=De(function*(C,j){!j&&c&&(yield X.collection("lists").delete(c.id));var k={user:X.authStore.model.id,film_id:C,status:j};c&&j&&(yield X.collection("lists").update(c.id,k)),!c&&j&&(yield X.collection("lists").create(k)),c=yield X.collection("lists").getFullList({filter:'film_id = "'+d.id+'"'}),c=c[0]}),P.apply(this,arguments)}Ke(De(function*(){var C;l(5,d=Object.fromEntries(t.url.searchParams)),l(0,f=yield Fe(d.id)),ze.add(f),l(2,u=[{name:"Alloha",iframe:"https://attractive-as.allarknow.online/?token=a3fd119d8a9418f6c3f6a7ae628a41&kp="},{name:"Collaps",iframe:"https://api.tobaco.ws/embed/kp/"},{name:"VideoCDN",iframe:"https://49442664434375553.svetacdn.in/sZfbdItt5jeX?kp_id="}]),l(3,g=u[0].iframe);var j=yield fetch("https://kinobox.tv/api/players?kinopoisk="+d.id).then(b=>b.json());j=j.filter(b=>{if(b.source=="Kodik"&&b.iframeUrl)return!0})[0],(C=j)!=null&&C.source&&l(2,u=[...u,{name:j.source,iframe:j.iframeUrl}]);try{if(l(1,p=X.authStore.isValid),p){var k;c=yield X.collection("lists").getFullList({filter:'film_id = "'+d.id+'"'}),c=c[0],l(4,S=(k=c)==null?void 0:k.status)}}catch{}}));function M(C){S=C,l(4,S)}const q=()=>F(d.id,S),T=C=>N(C.iframe);return s.$$set=C=>{"film"in C&&l(0,f=C.film)},s.$$.update=()=>{s.$$.dirty&15361&&l(6,r={score:(l(10,a=f)==null?void 0:a.ratingKinopoisk)||(l(11,n=f)==null?void 0:n.ratingImdb),platform:l(12,i=f)!=null&&i.ratingKinopoisk?"Кинопоиск":l(13,o=f)!=null&&o.ratingImdb?"IMDB":""})},[f,p,u,g,S,d,r,A,N,F,a,n,i,o,M,q,T]}class lt extends x{constructor(e){super(),ee(this,e,tt,et,Y,{film:0})}}function rt(s){let e,l;return e=new Te({props:{left:!0}}),{c(){O(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,t){K(e,r,t),l=!0},p:Z,i(r){l||(I(e.$$.fragment,r),l=!0)},o(r){U(e.$$.fragment,r),l=!1},d(r){R(e,r)}}}function st(s){let e,l,r,t,a,n=(s[0]??"")+"",i,o,f=(s[1]??"")+"",p,c;return r=new Ne({props:{title:"Назад",nav:!0,vibro:!0,dark:!0,circle:!0,$$slots:{default:[rt]},$$scope:{ctx:s}}}),r.$on("click",s[2]),{c(){e=w("section"),l=w("div"),O(r.$$.fragment),t=B(),a=w("h2"),i=J(n),o=w("span"),p=J(f),this.h()},l(u){e=$(u,"SECTION",{class:!0});var g=y(e);l=$(g,"DIV",{class:!0});var S=y(l);z(r.$$.fragment,S),S.forEach(m),t=L(g),a=$(g,"H2",{class:!0});var d=y(a);i=Q(d,n),o=$(d,"SPAN",{class:!0});var A=y(o);p=Q(A,f),A.forEach(m),d.forEach(m),g.forEach(m),this.h()},h(){h(l,"class","back svelte-4j2yli"),h(o,"class","svelte-4j2yli"),h(a,"class","svelte-4j2yli"),h(e,"class","svelte-4j2yli")},m(u,g){H(u,e,g),_(e,l),K(r,l,null),_(e,t),_(e,a),_(a,i),_(a,o),_(o,p),c=!0},p(u,[g]){const S={};g&8&&(S.$$scope={dirty:g,ctx:u}),r.$set(S),(!c||g&1)&&n!==(n=(u[0]??"")+"")&&W(i,n),(!c||g&2)&&f!==(f=(u[1]??"")+"")&&W(p,f)},i(u){c||(I(r.$$.fragment,u),c=!0)},o(u){U(r.$$.fragment,u),c=!1},d(u){u&&m(e),R(r)}}}function nt(s,e,l){let{title:r=""}=e,{year:t=""}=e;const a=()=>history.back();return s.$$set=n=>{"title"in n&&l(0,r=n.title),"year"in n&&l(1,t=n.year)},[r,t,a]}class at extends x{constructor(e){super(),ee(this,e,nt,st,Y,{title:0,year:1})}}function it(s){var c,u,g,S;let e,l,r,t,a,n,i,o;l=new at({props:{title:((c=s[0])==null?void 0:c.nameRu)||((u=s[0])==null?void 0:u.nameEn)||((g=s[0])==null?void 0:g.nameOriginal),year:(S=s[0])==null?void 0:S.year}});function f(d){s[1](d)}let p={};return s[0]!==void 0&&(p.film=s[0]),t=new lt({props:p}),Se.push(()=>je(t,"film",f)),i=new Oe({props:{type:"recomends"}}),{c(){e=w("div"),O(l.$$.fragment),r=B(),O(t.$$.fragment),n=B(),O(i.$$.fragment),this.h()},l(d){e=$(d,"DIV",{class:!0});var A=y(e);z(l.$$.fragment,A),r=L(A),z(t.$$.fragment,A),n=L(A),z(i.$$.fragment,A),A.forEach(m),this.h()},h(){h(e,"class","page-watch svelte-3zznia")},m(d,A){H(d,e,A),K(l,e,null),_(e,r),K(t,e,null),_(e,n),K(i,e,null),o=!0},p(d,[A]){var P,M,q,T;const N={};A&1&&(N.title=((P=d[0])==null?void 0:P.nameRu)||((M=d[0])==null?void 0:M.nameEn)||((q=d[0])==null?void 0:q.nameOriginal)),A&1&&(N.year=(T=d[0])==null?void 0:T.year),l.$set(N);const F={};!a&&A&1&&(a=!0,F.film=d[0],Ue(()=>a=!1)),t.$set(F)},i(d){o||(I(l.$$.fragment,d),I(t.$$.fragment,d),I(i.$$.fragment,d),o=!0)},o(d){U(l.$$.fragment,d),U(t.$$.fragment,d),U(i.$$.fragment,d),o=!1},d(d){d&&m(e),R(l),R(t),R(i)}}}function ot(s,e,l){var r;function t(a){r=a,l(0,r)}return[r,t]}class ct extends x{constructor(e){super(),ee(this,e,ot,it,Y,{})}}function ft(s){let e,l;return e=new ct({}),{c(){O(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,t){K(e,r,t),l=!0},p:Z,i(r){l||(I(e.$$.fragment,r),l=!0)},o(r){U(e.$$.fragment,r),l=!1},d(r){R(e,r)}}}class bt extends x{constructor(e){super(),ee(this,e,null,ft,Y,{})}}export{bt as component};
