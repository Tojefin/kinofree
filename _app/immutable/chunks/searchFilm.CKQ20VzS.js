import{b as $,t as B,S as T,i as q}from"./index.CxIW9Pu1.js";import{A as z,s as D,a as S,c as I,b as x,d as g,f as o,i as F,g as j,n as b}from"./scheduler.BjPIH0FZ.js";function U(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function V(e,t){$(e,1,1,()=>{t.delete(e.key)})}function X(e,t,n,i,a,f,h,N,C,A,m,L){let c=e.length,u=f.length,d=c;const y={};for(;d--;)y[e[d].key]=d;const p=[],k=new Map,v=new Map,E=[];for(d=u;d--;){const s=L(a,f,d),r=n(s);let l=h.get(r);l?E.push(()=>l.p(s,t)):(l=A(r,s),l.c()),k.set(r,p[d]=l),r in y&&v.set(r,Math.abs(d-y[r]))}const M=new Set,O=new Set;function _(s){B(s,1),s.m(N,m),h.set(s.key,s),m=s.first,u--}for(;c&&u;){const s=p[u-1],r=e[c-1],l=s.key,w=r.key;s===r?(m=s.first,c--,u--):k.has(w)?!h.has(l)||M.has(l)?_(s):O.has(w)?c--:v.get(l)>v.get(w)?(O.add(l),_(s)):(M.add(w),c--):(C(r,h),c--)}for(;c--;){const s=e[c];k.has(s.key)||C(s,h)}for(;u;)_(p[u-1]);return z(E),p}function G(e){let t,n,i;return{c(){t=S("svg"),n=S("g"),i=S("path"),this.h()},l(a){t=I(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var f=x(t);n=I(f,"g",{id:!0});var h=x(n);i=I(h,"path",{id:!0,d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),x(i).forEach(g),h.forEach(g),f.forEach(g),this.h()},h(){o(i,"id","Vector"),o(i,"d","M15 15L21 21M10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 13.866 13.866 17 10 17Z"),o(i,"stroke","white"),o(i,"stroke-width","2"),o(i,"stroke-linecap","round"),o(i,"stroke-linejoin","round"),o(n,"id","Search"),o(t,"width","24"),o(t,"height","24"),o(t,"viewBox","0 0 24 24"),o(t,"fill","none"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"class","zoom")},m(a,f){F(a,t,f),j(t,n),j(n,i)},p:b,i:b,o:b,d(a){a&&g(t)}}}class Y extends T{constructor(t){super(),q(this,t,null,G,D,{})}}const J={get:()=>{try{let e=JSON.parse(localStorage.getItem("watch_history"));return e||(localStorage.setItem("watch_history",JSON.stringify([])),e=[]),e}catch(e){console.error(e)}},add:e=>{let t=J.get(),n=t.filter(a=>a.kinopoiskId==e.kinopoiskId)[0];if(n){let a=t.indexOf(n);t.splice(a,1)}let i=Date.now();e={...e,_kinofree:{lastviewed:i}},t.unshift(e),t.length>24&&t.pop(),localStorage.setItem("watch_history",JSON.stringify(t))},remove:e=>{let t=J.get(),n=t.filter(i=>i.kinopoiskId!=e.kinopoiskId);localStorage.setItem("watch_history",JSON.stringify(n)),t=n}};let H={method:"GET",headers:{"Content-Type":"application/json","X-API-KEY":"4b12f46d-638b-4bac-bf06-33865d3a3524"}},K="https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword";async function Z(e,t=1){return e?await(await fetch(`${K}?keyword=${e}&page=${t}`,H)).json():[]}export{Y as L,V as a,U as e,H as o,Z as s,X as u,J as w};
