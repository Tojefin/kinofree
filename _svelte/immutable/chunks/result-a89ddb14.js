import{S as te,i as le,s as ae,e as g,k as P,t as M,c as k,a as b,d as _,m as C,h as T,b as v,X as ie,g as q,F as h,j as F,E as D,H as G,Y as qe,I as Ee,R as Pe,L as Ce,q as E,l as J,w as _e,x as he,y as me,o as R,B as ge,n as X,p as Y,Q as Ie,J as $,K as B}from"./index-ab0a084c.js";import{g as re,s as ee,r as O,a as Re,d as Ne}from"./navigation-b6fb81ff.js";function Me(i){let t,a,e,l,s,d,n,r,o,p,c,f,u,x,m,z,V,w,N,U;return{c(){t=g("div"),a=g("a"),e=g("img"),d=P(),n=g("div"),r=g("a"),o=g("h2"),p=M(i[2]),f=P(),u=g("small"),x=M(i[3]),m=P(),z=g("small"),V=M(i[4]),w=P(),N=g("p"),U=M(i[5]),this.h()},l(y){t=k(y,"DIV",{class:!0});var j=b(t);a=k(j,"A",{href:!0});var L=b(a);e=k(L,"IMG",{class:!0,loading:!0,src:!0}),L.forEach(_),d=C(j),n=k(j,"DIV",{class:!0});var I=b(n);r=k(I,"A",{href:!0});var A=b(r);o=k(A,"H2",{class:!0,title:!0});var S=b(o);p=T(S,i[2]),S.forEach(_),A.forEach(_),f=C(I),u=k(I,"SMALL",{class:!0});var K=b(u);x=T(K,i[3]),K.forEach(_),m=C(I),z=k(I,"SMALL",{class:!0});var H=b(z);V=T(H,i[4]),H.forEach(_),w=C(I),N=k(I,"P",{class:!0});var Q=b(N);U=T(Q,i[5]),Q.forEach(_),I.forEach(_),j.forEach(_),this.h()},h(){v(e,"class","card__img svelte-1pddkkl"),v(e,"loading","lazy"),ie(e.src,l=i[1])||v(e,"src",l),v(a,"href",s="/watch?id="+i[0]),v(o,"class","card__title svelte-1pddkkl"),v(o,"title",i[2]),v(r,"href",c="/watch?id="+i[0]),v(u,"class","card__year svelte-1pddkkl"),v(z,"class","card__rating svelte-1pddkkl"),v(N,"class","card__desc svelte-1pddkkl"),v(n,"class","card__info svelte-1pddkkl"),v(t,"class","card svelte-1pddkkl")},m(y,j){q(y,t,j),h(t,a),h(a,e),h(t,d),h(t,n),h(n,r),h(r,o),h(o,p),h(n,f),h(n,u),h(u,x),h(n,m),h(n,z),h(z,V),h(n,w),h(n,N),h(N,U)},p(y,[j]){j&2&&!ie(e.src,l=y[1])&&v(e,"src",l),j&1&&s!==(s="/watch?id="+y[0])&&v(a,"href",s),j&4&&F(p,y[2]),j&4&&v(o,"title",y[2]),j&1&&c!==(c="/watch?id="+y[0])&&v(r,"href",c),j&8&&F(x,y[3]),j&16&&F(V,y[4]),j&32&&F(U,y[5])},i:D,o:D,d(y){y&&_(t)}}}function Te(i,t,a){let{id:e,poster:l,name:s,year:d,rating:n,desc:r=""}=t;return i.$$set=o=>{"id"in o&&a(0,e=o.id),"poster"in o&&a(1,l=o.poster),"name"in o&&a(2,s=o.name),"year"in o&&a(3,d=o.year),"rating"in o&&a(4,n=o.rating),"desc"in o&&a(5,r=o.desc)},[e,l,s,d,n,r]}class Ue extends te{constructor(t){super(),le(this,t,Te,Me,ae,{id:0,poster:1,name:2,year:3,rating:4,desc:5})}}function se(i){let t,a,e;return{c(){t=g("input"),this.h()},l(l){t=k(l,"INPUT",{class:!0,type:!0}),this.h()},h(){v(t,"class","button result__button svelte-jvqj78"),v(t,"type","button"),t.value="<"},m(l,s){q(l,t,s),a||(e=G(t,"click",i[4]),a=!0)},p:D,d(l){l&&_(t),a=!1,e()}}}function ne(i){let t,a,e;return{c(){t=g("input"),this.h()},l(l){t=k(l,"INPUT",{class:!0,type:!0}),this.h()},h(){v(t,"class","button result__button svelte-jvqj78"),v(t,"type","button"),t.value=">"},m(l,s){q(l,t,s),a||(e=G(t,"click",i[7]),a=!0)},p:D,d(l){l&&_(t),a=!1,e()}}}function Ve(i){let t,a,e,l,s,d,n,r,o,p,c,f=i[0]>1&&se(i),u=i[1]>1&&i[0]!=i[1]&&ne(i);return{c(){t=g("nav"),f&&f.c(),a=P(),e=g("p"),l=M(`\u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430\r
    `),s=g("input"),n=M(`\r
   / `),r=M(i[1]),o=P(),u&&u.c(),this.h()},l(x){t=k(x,"NAV",{class:!0});var m=b(t);f&&f.l(m),a=C(m),e=k(m,"P",{class:!0});var z=b(e);l=T(z,`\u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430\r
    `),s=k(z,"INPUT",{type:!0,maxlength:!0,size:!0,class:!0}),n=T(z,`\r
   / `),r=T(z,i[1]),z.forEach(_),o=C(m),u&&u.l(m),m.forEach(_),this.h()},h(){v(s,"type","text"),s.value=i[0],v(s,"maxlength","2"),v(s,"size",d=i[0].length+1),v(s,"class","svelte-jvqj78"),v(e,"class","svelte-jvqj78"),v(t,"class","result__nav svelte-jvqj78")},m(x,m){q(x,t,m),f&&f.m(t,null),h(t,a),h(t,e),h(e,l),h(e,s),i[5](s),h(e,n),h(e,r),h(t,o),u&&u.m(t,null),p||(c=[G(s,"keypress",i[6]),G(s,"input",function(){qe(i[2].size=i[2].value.length+1)&&(i[2].size=i[2].value.length+1).apply(this,arguments)})],p=!0)},p(x,[m]){i=x,i[0]>1?f?f.p(i,m):(f=se(i),f.c(),f.m(t,a)):f&&(f.d(1),f=null),m&1&&s.value!==i[0]&&(s.value=i[0]),m&1&&d!==(d=i[0].length+1)&&v(s,"size",d),m&2&&F(r,i[1]),i[1]>1&&i[0]!=i[1]?u?u.p(i,m):(u=ne(i),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},i:D,o:D,d(x){x&&_(t),f&&f.d(),i[5](null),u&&u.d(),p=!1,Ee(c)}}}function De(i,t,a){var e=Pe();let{pagesCount:l=1}=t,{curPage:s="1"}=t;var d;const n=()=>e("Nav",{newPage:a(0,--s)});function r(c){Ce[c?"unshift":"push"](()=>{d=c,a(2,d)})}const o=c=>{c.charCode===13&&d.value<=l&&d.value>0&&e("Nav",{newPage:d.value})},p=()=>e("Nav",{newPage:a(0,++s)});return i.$$set=c=>{"pagesCount"in c&&a(1,l=c.pagesCount),"curPage"in c&&a(0,s=c.curPage)},[s,l,d,e,n,r,o,p]}class Le extends te{constructor(t){super(),le(this,t,De,Ve,ae,{pagesCount:1,curPage:0})}}function oe(i,t,a){const e=i.slice();return e[9]=t[a],e}function de(i){let t,a,e,l,s,d,n=i[0]=="await"&&fe(),r=i[0]=="error"&&ue(),o=i[0]=="ready"&&pe(i),p=i[0]=="ready"&&ve(i);return{c(){t=g("div"),a=g("ul"),n&&n.c(),e=P(),r&&r.c(),l=P(),o&&o.c(),s=P(),p&&p.c(),this.h()},l(c){t=k(c,"DIV",{class:!0});var f=b(t);a=k(f,"UL",{class:!0});var u=b(a);n&&n.l(u),e=C(u),r&&r.l(u),l=C(u),o&&o.l(u),u.forEach(_),s=C(f),p&&p.l(f),f.forEach(_),this.h()},h(){v(a,"class","result__list svelte-daztkr"),v(t,"class","result svelte-daztkr")},m(c,f){q(c,t,f),h(t,a),n&&n.m(a,null),h(a,e),r&&r.m(a,null),h(a,l),o&&o.m(a,null),h(t,s),p&&p.m(t,null),d=!0},p(c,f){c[0]=="await"?n||(n=fe(),n.c(),n.m(a,e)):n&&(n.d(1),n=null),c[0]=="error"?r||(r=ue(),r.c(),r.m(a,l)):r&&(r.d(1),r=null),c[0]=="ready"?o?(o.p(c,f),f&1&&E(o,1)):(o=pe(c),o.c(),E(o,1),o.m(a,null)):o&&(X(),R(o,1,1,()=>{o=null}),Y()),c[0]=="ready"?p?(p.p(c,f),f&1&&E(p,1)):(p=ve(c),p.c(),E(p,1),p.m(t,null)):p&&(X(),R(p,1,1,()=>{p=null}),Y())},i(c){d||(E(o),E(p),d=!0)},o(c){R(o),R(p),d=!1},d(c){c&&_(t),n&&n.d(),r&&r.d(),o&&o.d(),p&&p.d()}}}function fe(i){let t,a,e,l,s,d,n;return{c(){t=g("div"),a=P(),e=g("div"),l=P(),s=g("div"),d=P(),n=g("div"),this.h()},l(r){t=k(r,"DIV",{class:!0}),b(t).forEach(_),a=C(r),e=k(r,"DIV",{class:!0}),b(e).forEach(_),l=C(r),s=k(r,"DIV",{class:!0}),b(s).forEach(_),d=C(r),n=k(r,"DIV",{class:!0}),b(n).forEach(_),this.h()},h(){v(t,"class","card__loading svelte-daztkr"),v(e,"class","card__loading svelte-daztkr"),v(s,"class","card__loading svelte-daztkr"),v(n,"class","card__loading svelte-daztkr")},m(r,o){q(r,t,o),q(r,a,o),q(r,e,o),q(r,l,o),q(r,s,o),q(r,d,o),q(r,n,o)},d(r){r&&_(t),r&&_(a),r&&_(e),r&&_(l),r&&_(s),r&&_(d),r&&_(n)}}}function ue(i){let t,a,e,l,s,d;return{c(){t=g("div"),a=g("h2"),e=M("\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E"),l=P(),s=g("p"),d=M("\u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043F\u0440\u043E\u0441"),this.h()},l(n){t=k(n,"DIV",{class:!0});var r=b(t);a=k(r,"H2",{class:!0});var o=b(a);e=T(o,"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E"),o.forEach(_),l=C(r),s=k(r,"P",{class:!0});var p=b(s);d=T(p,"\u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043F\u0440\u043E\u0441"),p.forEach(_),r.forEach(_),this.h()},h(){v(a,"class","error__title svelte-daztkr"),v(s,"class","error__sub svelte-daztkr"),v(t,"class","error")},m(n,r){q(n,t,r),h(t,a),h(a,e),h(t,l),h(t,s),h(s,d)},d(n){n&&_(t)}}}function pe(i){let t,a,e=i[1],l=[];for(let d=0;d<e.length;d+=1)l[d]=ce(oe(i,e,d));const s=d=>R(l[d],1,1,()=>{l[d]=null});return{c(){for(let d=0;d<l.length;d+=1)l[d].c();t=J()},l(d){for(let n=0;n<l.length;n+=1)l[n].l(d);t=J()},m(d,n){for(let r=0;r<l.length;r+=1)l[r].m(d,n);q(d,t,n),a=!0},p(d,n){if(n&2){e=d[1];let r;for(r=0;r<e.length;r+=1){const o=oe(d,e,r);l[r]?(l[r].p(o,n),E(l[r],1)):(l[r]=ce(o),l[r].c(),E(l[r],1),l[r].m(t.parentNode,t))}for(X(),r=e.length;r<l.length;r+=1)s(r);Y()}},i(d){if(!a){for(let n=0;n<e.length;n+=1)E(l[n]);a=!0}},o(d){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)R(l[n]);a=!1},d(d){Ie(l,d),d&&_(t)}}}function ce(i){let t,a;return t=new Ue({props:{id:i[9].id,poster:i[9].poster,name:i[9].name,year:i[9].year,rating:i[9].rating,desc:i[9].desc}}),{c(){_e(t.$$.fragment)},l(e){he(t.$$.fragment,e)},m(e,l){me(t,e,l),a=!0},p(e,l){const s={};l&2&&(s.id=e[9].id),l&2&&(s.poster=e[9].poster),l&2&&(s.name=e[9].name),l&2&&(s.year=e[9].year),l&2&&(s.rating=e[9].rating),l&2&&(s.desc=e[9].desc),t.$set(s)},i(e){a||(E(t.$$.fragment,e),a=!0)},o(e){R(t.$$.fragment,e),a=!1},d(e){ge(t,e)}}}function ve(i){let t,a;return t=new Le({props:{pagesCount:i[2],curPage:i[3]}}),t.$on("Nav",i[4]),{c(){_e(t.$$.fragment)},l(e){he(t.$$.fragment,e)},m(e,l){me(t,e,l),a=!0},p(e,l){const s={};l&4&&(s.pagesCount=e[2]),l&8&&(s.curPage=e[3]),t.$set(s)},i(e){a||(E(t.$$.fragment,e),a=!0)},o(e){R(t.$$.fragment,e),a=!1},d(e){ge(t,e)}}}function Ae(i){let t,a,e=i[0]&&de(i);return{c(){e&&e.c(),t=J()},l(l){e&&e.l(l),t=J()},m(l,s){e&&e.m(l,s),q(l,t,s),a=!0},p(l,[s]){l[0]?e?(e.p(l,s),s&1&&E(e,1)):(e=de(l),e.c(),E(e,1),e.m(t.parentNode,t)):e&&(X(),R(e,1,1,()=>{e=null}),Y())},i(l){a||(E(e),a=!0)},o(l){R(e),a=!1},d(l){e&&e.d(l),l&&_(t)}}}function Se(i,t,a){let e,l,s;$(i,ee,f=>a(0,e=f)),$(i,O,f=>a(5,l=f)),$(i,Ne,f=>a(6,s=f));var d=[],n,r,o=f=>{f=="render"&&p(s)};function p(f){var u,x,m,z;a(1,d=[]),a(2,n=(u=f.totalPages)!=null?u:f.pagesCount),a(3,r=(x=re().page)!=null?x:"1");var V=(m=(z=f.films)!=null?z:f.items)!=null?m:f;V.forEach(w=>{var N,U,y,j,L,I,A,S,K,H,Q;if(w.genres){var W="";w.genres.forEach(ze=>{W=""+W+ze.genre+" "})}if(w.relationType){if(w.relationType=="SEQUEL")var Z="\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u0435";else if(w.relationType=="PREQUEL")var Z="\u041F\u0440\u0435\u0434\u044B\u0441\u0442\u043E\u0440\u0438\u044F";else if(w.relationType=="REMAKE")var Z="\u0420\u0435\u043C\u0435\u0439\u043A"}var ke=(N=w.kinopoiskId)!=null?N:w.filmId,we=w.posterUrlPreview,xe=(U=(y=w.nameRu)!=null?y:w.nameOriginal)!=null?U:"-",be=(j=(L=w.premiereRu)!=null?L:w.year)!=null?j:"-",je=(I=(A=(S=w.ratingKinopoisk)!=null?S:w.rating)!=null?A:w.ratingImdb)!=null?I:"-",ye=(K=(H=(Q=w.description)!=null?Q:W)!=null?H:Z)!=null?K:"-";a(1,d=[...d,{id:ke,poster:we,name:xe,year:be,rating:je,desc:ye}])}),B(ee,e="ready",e)}var c=f=>{var u,x=re();x.page?(B(O,l.page=f.detail.newPage,l),u=location.search.replace("&page="+x.page,"&page="+f.detail.newPage)):(B(O,l.page=2,l),u=location.search+"&page=2"),B(O,l.search=x[0],l);var m=new URL("/search"+u,window.location.origin);window.scrollTo(0,0),B(ee,e="search",e),Re(m)};return i.$$.update=()=>{i.$$.dirty&1&&o(e)},[e,d,n,r,c]}class Qe extends te{constructor(t){super(),le(this,t,Se,Ae,ae,{})}}export{Qe as R};
