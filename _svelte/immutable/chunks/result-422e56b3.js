import{S as te,i as le,s as ae,e as g,k as P,t as N,c as k,a as y,d as _,m as C,h as T,b as v,M as ie,g as z,F as h,j as O,E as D,H as G,Y as ze,I as Ee,T as Pe,L as Ce,q as E,l as J,w as _e,x as he,y as me,o as R,B as ge,n as Y,p as W,R as Ie,J as $,K as F}from"./index-871885c7.js";import{g as se,s as ee,r as Q,a as Re,d as Me}from"./navigation-a2076b93.js";function Ne(i){let t,a,e,l,r,d,n,s,o,p,c,f,u,x,m,q,V,w,M,U;return{c(){t=g("div"),a=g("a"),e=g("img"),d=P(),n=g("div"),s=g("a"),o=g("h2"),p=N(i[2]),f=P(),u=g("small"),x=N(i[3]),m=P(),q=g("small"),V=N(i[4]),w=P(),M=g("p"),U=N(i[5]),this.h()},l(j){t=k(j,"DIV",{class:!0});var b=y(t);a=k(b,"A",{href:!0});var L=y(a);e=k(L,"IMG",{class:!0,loading:!0,src:!0}),L.forEach(_),d=C(b),n=k(b,"DIV",{class:!0});var I=y(n);s=k(I,"A",{href:!0});var A=y(s);o=k(A,"H2",{class:!0,title:!0});var S=y(o);p=T(S,i[2]),S.forEach(_),A.forEach(_),f=C(I),u=k(I,"SMALL",{class:!0});var K=y(u);x=T(K,i[3]),K.forEach(_),m=C(I),q=k(I,"SMALL",{class:!0});var H=y(q);V=T(H,i[4]),H.forEach(_),w=C(I),M=k(I,"P",{class:!0});var B=y(M);U=T(B,i[5]),B.forEach(_),I.forEach(_),b.forEach(_),this.h()},h(){v(e,"class","card__img svelte-1pddkkl"),v(e,"loading","lazy"),ie(e.src,l=i[1])||v(e,"src",l),v(a,"href",r="/watch?id="+i[0]),v(o,"class","card__title svelte-1pddkkl"),v(o,"title",i[2]),v(s,"href",c="/watch?id="+i[0]),v(u,"class","card__year svelte-1pddkkl"),v(q,"class","card__rating svelte-1pddkkl"),v(M,"class","card__desc svelte-1pddkkl"),v(n,"class","card__info svelte-1pddkkl"),v(t,"class","card svelte-1pddkkl")},m(j,b){z(j,t,b),h(t,a),h(a,e),h(t,d),h(t,n),h(n,s),h(s,o),h(o,p),h(n,f),h(n,u),h(u,x),h(n,m),h(n,q),h(q,V),h(n,w),h(n,M),h(M,U)},p(j,[b]){b&2&&!ie(e.src,l=j[1])&&v(e,"src",l),b&1&&r!==(r="/watch?id="+j[0])&&v(a,"href",r),b&4&&O(p,j[2]),b&4&&v(o,"title",j[2]),b&1&&c!==(c="/watch?id="+j[0])&&v(s,"href",c),b&8&&O(x,j[3]),b&16&&O(V,j[4]),b&32&&O(U,j[5])},i:D,o:D,d(j){j&&_(t)}}}function Te(i,t,a){let{id:e,poster:l,name:r,year:d,rating:n,desc:s=""}=t;return i.$$set=o=>{"id"in o&&a(0,e=o.id),"poster"in o&&a(1,l=o.poster),"name"in o&&a(2,r=o.name),"year"in o&&a(3,d=o.year),"rating"in o&&a(4,n=o.rating),"desc"in o&&a(5,s=o.desc)},[e,l,r,d,n,s]}class Ue extends te{constructor(t){super(),le(this,t,Te,Ne,ae,{id:0,poster:1,name:2,year:3,rating:4,desc:5})}}function re(i){let t,a,e;return{c(){t=g("input"),this.h()},l(l){t=k(l,"INPUT",{class:!0,type:!0}),this.h()},h(){v(t,"class","button result__button svelte-jvqj78"),v(t,"type","button"),t.value="<"},m(l,r){z(l,t,r),a||(e=G(t,"click",i[4]),a=!0)},p:D,d(l){l&&_(t),a=!1,e()}}}function ne(i){let t,a,e;return{c(){t=g("input"),this.h()},l(l){t=k(l,"INPUT",{class:!0,type:!0}),this.h()},h(){v(t,"class","button result__button svelte-jvqj78"),v(t,"type","button"),t.value=">"},m(l,r){z(l,t,r),a||(e=G(t,"click",i[7]),a=!0)},p:D,d(l){l&&_(t),a=!1,e()}}}function Ve(i){let t,a,e,l,r,d,n,s,o,p,c,f=i[0]>1&&re(i),u=i[1]>1&&i[0]!=i[1]&&ne(i);return{c(){t=g("nav"),f&&f.c(),a=P(),e=g("p"),l=N(`\u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430\r
    `),r=g("input"),n=N(`\r
   / `),s=N(i[1]),o=P(),u&&u.c(),this.h()},l(x){t=k(x,"NAV",{class:!0});var m=y(t);f&&f.l(m),a=C(m),e=k(m,"P",{class:!0});var q=y(e);l=T(q,`\u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430\r
    `),r=k(q,"INPUT",{type:!0,maxlength:!0,size:!0,class:!0}),n=T(q,`\r
   / `),s=T(q,i[1]),q.forEach(_),o=C(m),u&&u.l(m),m.forEach(_),this.h()},h(){v(r,"type","text"),r.value=i[0],v(r,"maxlength","2"),v(r,"size",d=i[0].length+1),v(r,"class","svelte-jvqj78"),v(e,"class","svelte-jvqj78"),v(t,"class","result__nav svelte-jvqj78")},m(x,m){z(x,t,m),f&&f.m(t,null),h(t,a),h(t,e),h(e,l),h(e,r),i[5](r),h(e,n),h(e,s),h(t,o),u&&u.m(t,null),p||(c=[G(r,"keypress",i[6]),G(r,"input",function(){ze(i[2].size=i[2].value.length+1)&&(i[2].size=i[2].value.length+1).apply(this,arguments)})],p=!0)},p(x,[m]){i=x,i[0]>1?f?f.p(i,m):(f=re(i),f.c(),f.m(t,a)):f&&(f.d(1),f=null),m&1&&r.value!==i[0]&&(r.value=i[0]),m&1&&d!==(d=i[0].length+1)&&v(r,"size",d),m&2&&O(s,i[1]),i[1]>1&&i[0]!=i[1]?u?u.p(i,m):(u=ne(i),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},i:D,o:D,d(x){x&&_(t),f&&f.d(),i[5](null),u&&u.d(),p=!1,Ee(c)}}}function De(i,t,a){var e=Pe();let{pagesCount:l=1}=t,{curPage:r="1"}=t;var d;const n=()=>e("Nav",{newPage:a(0,--r)});function s(c){Ce[c?"unshift":"push"](()=>{d=c,a(2,d)})}const o=c=>{c.charCode===13&&d.value<=l&&d.value>0&&e("Nav",{newPage:d.value})},p=()=>e("Nav",{newPage:a(0,++r)});return i.$$set=c=>{"pagesCount"in c&&a(1,l=c.pagesCount),"curPage"in c&&a(0,r=c.curPage)},[r,l,d,e,n,s,o,p]}class Le extends te{constructor(t){super(),le(this,t,De,Ve,ae,{pagesCount:1,curPage:0})}}function oe(i,t,a){const e=i.slice();return e[9]=t[a],e}function de(i){let t,a,e,l,r,d,n=i[0]=="await"&&fe(),s=i[0]=="error"&&ue(),o=i[0]=="ready"&&pe(i),p=i[0]=="ready"&&ve(i);return{c(){t=g("div"),a=g("ul"),n&&n.c(),e=P(),s&&s.c(),l=P(),o&&o.c(),r=P(),p&&p.c(),this.h()},l(c){t=k(c,"DIV",{class:!0});var f=y(t);a=k(f,"UL",{class:!0});var u=y(a);n&&n.l(u),e=C(u),s&&s.l(u),l=C(u),o&&o.l(u),u.forEach(_),r=C(f),p&&p.l(f),f.forEach(_),this.h()},h(){v(a,"class","result__list svelte-dx8dy3"),v(t,"class","result svelte-dx8dy3")},m(c,f){z(c,t,f),h(t,a),n&&n.m(a,null),h(a,e),s&&s.m(a,null),h(a,l),o&&o.m(a,null),h(t,r),p&&p.m(t,null),d=!0},p(c,f){c[0]=="await"?n||(n=fe(),n.c(),n.m(a,e)):n&&(n.d(1),n=null),c[0]=="error"?s||(s=ue(),s.c(),s.m(a,l)):s&&(s.d(1),s=null),c[0]=="ready"?o?(o.p(c,f),f&1&&E(o,1)):(o=pe(c),o.c(),E(o,1),o.m(a,null)):o&&(Y(),R(o,1,1,()=>{o=null}),W()),c[0]=="ready"?p?(p.p(c,f),f&1&&E(p,1)):(p=ve(c),p.c(),E(p,1),p.m(t,null)):p&&(Y(),R(p,1,1,()=>{p=null}),W())},i(c){d||(E(o),E(p),d=!0)},o(c){R(o),R(p),d=!1},d(c){c&&_(t),n&&n.d(),s&&s.d(),o&&o.d(),p&&p.d()}}}function fe(i){let t,a,e,l,r,d,n;return{c(){t=g("div"),a=P(),e=g("div"),l=P(),r=g("div"),d=P(),n=g("div"),this.h()},l(s){t=k(s,"DIV",{class:!0}),y(t).forEach(_),a=C(s),e=k(s,"DIV",{class:!0}),y(e).forEach(_),l=C(s),r=k(s,"DIV",{class:!0}),y(r).forEach(_),d=C(s),n=k(s,"DIV",{class:!0}),y(n).forEach(_),this.h()},h(){v(t,"class","card__loading svelte-dx8dy3"),v(e,"class","card__loading svelte-dx8dy3"),v(r,"class","card__loading svelte-dx8dy3"),v(n,"class","card__loading svelte-dx8dy3")},m(s,o){z(s,t,o),z(s,a,o),z(s,e,o),z(s,l,o),z(s,r,o),z(s,d,o),z(s,n,o)},d(s){s&&_(t),s&&_(a),s&&_(e),s&&_(l),s&&_(r),s&&_(d),s&&_(n)}}}function ue(i){let t,a,e,l,r,d;return{c(){t=g("div"),a=g("h2"),e=N("\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E"),l=P(),r=g("p"),d=N("\u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043F\u0440\u043E\u0441"),this.h()},l(n){t=k(n,"DIV",{class:!0});var s=y(t);a=k(s,"H2",{class:!0});var o=y(a);e=T(o,"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E"),o.forEach(_),l=C(s),r=k(s,"P",{class:!0});var p=y(r);d=T(p,"\u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043F\u0440\u043E\u0441"),p.forEach(_),s.forEach(_),this.h()},h(){v(a,"class","error__title svelte-dx8dy3"),v(r,"class","error__sub svelte-dx8dy3"),v(t,"class","error")},m(n,s){z(n,t,s),h(t,a),h(a,e),h(t,l),h(t,r),h(r,d)},d(n){n&&_(t)}}}function pe(i){let t,a,e=i[1],l=[];for(let d=0;d<e.length;d+=1)l[d]=ce(oe(i,e,d));const r=d=>R(l[d],1,1,()=>{l[d]=null});return{c(){for(let d=0;d<l.length;d+=1)l[d].c();t=J()},l(d){for(let n=0;n<l.length;n+=1)l[n].l(d);t=J()},m(d,n){for(let s=0;s<l.length;s+=1)l[s].m(d,n);z(d,t,n),a=!0},p(d,n){if(n&2){e=d[1];let s;for(s=0;s<e.length;s+=1){const o=oe(d,e,s);l[s]?(l[s].p(o,n),E(l[s],1)):(l[s]=ce(o),l[s].c(),E(l[s],1),l[s].m(t.parentNode,t))}for(Y(),s=e.length;s<l.length;s+=1)r(s);W()}},i(d){if(!a){for(let n=0;n<e.length;n+=1)E(l[n]);a=!0}},o(d){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)R(l[n]);a=!1},d(d){Ie(l,d),d&&_(t)}}}function ce(i){let t,a;return t=new Ue({props:{id:i[9].id,poster:i[9].poster,name:i[9].name,year:i[9].year,rating:i[9].rating,desc:i[9].desc}}),{c(){_e(t.$$.fragment)},l(e){he(t.$$.fragment,e)},m(e,l){me(t,e,l),a=!0},p(e,l){const r={};l&2&&(r.id=e[9].id),l&2&&(r.poster=e[9].poster),l&2&&(r.name=e[9].name),l&2&&(r.year=e[9].year),l&2&&(r.rating=e[9].rating),l&2&&(r.desc=e[9].desc),t.$set(r)},i(e){a||(E(t.$$.fragment,e),a=!0)},o(e){R(t.$$.fragment,e),a=!1},d(e){ge(t,e)}}}function ve(i){let t,a;return t=new Le({props:{pagesCount:i[2],curPage:i[3]}}),t.$on("Nav",i[4]),{c(){_e(t.$$.fragment)},l(e){he(t.$$.fragment,e)},m(e,l){me(t,e,l),a=!0},p(e,l){const r={};l&4&&(r.pagesCount=e[2]),l&8&&(r.curPage=e[3]),t.$set(r)},i(e){a||(E(t.$$.fragment,e),a=!0)},o(e){R(t.$$.fragment,e),a=!1},d(e){ge(t,e)}}}function Ae(i){let t,a,e=i[0]&&de(i);return{c(){e&&e.c(),t=J()},l(l){e&&e.l(l),t=J()},m(l,r){e&&e.m(l,r),z(l,t,r),a=!0},p(l,[r]){l[0]?e?(e.p(l,r),r&1&&E(e,1)):(e=de(l),e.c(),E(e,1),e.m(t.parentNode,t)):e&&(Y(),R(e,1,1,()=>{e=null}),W())},i(l){a||(E(e),a=!0)},o(l){R(e),a=!1},d(l){e&&e.d(l),l&&_(t)}}}function Se(i,t,a){let e,l,r;$(i,ee,f=>a(0,e=f)),$(i,Q,f=>a(5,l=f)),$(i,Me,f=>a(6,r=f));var d=[],n,s,o=f=>{f=="render"&&p(r)};function p(f){var u,x,m,q;a(1,d=[]),a(2,n=(u=f.totalPages)!=null?u:f.pagesCount),a(3,s=(x=se().page)!=null?x:"1");var V=(m=(q=f.films)!=null?q:f.items)!=null?m:f;V.forEach(w=>{var M,U,j,b,L,I,A,S,K,H,B;if(w.genres){var X="";w.genres.forEach(qe=>{X=""+X+qe.genre+" "})}if(w.relationType){if(w.relationType=="SEQUEL")var Z="\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u0435";else if(w.relationType=="PREQUEL")var Z="\u041F\u0440\u0435\u0434\u044B\u0441\u0442\u043E\u0440\u0438\u044F";else if(w.relationType=="REMAKE")var Z="\u0420\u0435\u043C\u0435\u0439\u043A"}var ke=(M=w.kinopoiskId)!=null?M:w.filmId,we=w.posterUrlPreview,xe=(U=(j=w.nameRu)!=null?j:w.nameOriginal)!=null?U:"-",ye=(b=(L=w.premiereRu)!=null?L:w.year)!=null?b:"-",be=(I=(A=(S=w.ratingKinopoisk)!=null?S:w.rating)!=null?A:w.ratingImdb)!=null?I:"-",je=(K=(H=(B=w.description)!=null?B:X)!=null?H:Z)!=null?K:"-";a(1,d=[...d,{id:ke,poster:we,name:xe,year:ye,rating:be,desc:je}])}),F(ee,e="ready",e)}var c=f=>{var u,x=se();x.page?(F(Q,l.page=f.detail.newPage,l),u=location.search.replace("&page="+x.page,"&page="+f.detail.newPage)):(F(Q,l.page=2,l),u=location.search+"&page=2"),F(Q,l.search=x[0],l);var m=new URL("/search"+u,window.location.origin);window.scrollTo(0,0),F(ee,e="search",e),Re(m)};return i.$$.update=()=>{i.$$.dirty&1&&o(e)},[e,d,n,s,c]}class Be extends te{constructor(t){super(),le(this,t,Se,Ae,ae,{})}}export{Be as R};
