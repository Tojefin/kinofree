import{s as re,n as S,f as ve,o as De}from"./scheduler.hW0JTbzp.js";import{S as ne,i as ae,B as se,C as ie,a as d,d as c,n as o,g as D,h as m,e as v,c as g,o as W,z as oe,v as H,A as fe,u as C,s as N,t as T,f as O,b as K,j as q,m as Ie,D as ge,k as Q,l as X,p as Y,w as Z,r as Ce,H as Me}from"./index.vbNZMW90.js";import{o as ye,e as pe,u as He,a as je,L as $e}from"./_options.ppq8KazM.js";import{A as Ae}from"./watchPlayer.svelte_svelte_type_style_lang.bOZPtuAV.js";import{g as Ve}from"./entry.KiOphwu2.js";function Se(r){let e,l;return{c(){e=se("svg"),l=se("path"),this.h()},l(t){e=ie(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=d(e);l=ie(s,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),d(l).forEach(c),s.forEach(c),this.h()},h(){o(l,"d","M14 10V17M10 10V17M6 6V17.8C6 18.9201 6 19.4798 6.21799 19.9076C6.40973 20.2839 6.71547 20.5905 7.0918 20.7822C7.5192 21 8.07899 21 9.19691 21H14.8031C15.921 21 16.48 21 16.9074 20.7822C17.2837 20.5905 17.5905 20.2839 17.7822 19.9076C18 19.4802 18 18.921 18 17.8031V6M6 6H8M6 6H4M8 6H16M8 6C8 5.06812 8 4.60241 8.15224 4.23486C8.35523 3.74481 8.74432 3.35523 9.23437 3.15224C9.60192 3 10.0681 3 11 3H13C13.9319 3 14.3978 3 14.7654 3.15224C15.2554 3.35523 15.6447 3.74481 15.8477 4.23486C15.9999 4.6024 16 5.06812 16 6M16 6H18M18 6H20"),o(l,"stroke","white"),o(l,"stroke-width","2"),o(l,"stroke-linecap","round"),o(l,"stroke-linejoin","round"),o(e,"width","24"),o(e,"height","24"),o(e,"viewBox","0 0 24 24"),o(e,"fill","none"),o(e,"xmlns","http://www.w3.org/2000/svg")},m(t,s){D(t,e,s),m(e,l)},p:S,i:S,o:S,d(t){t&&c(e)}}}class Re extends ne{constructor(e){super(),ae(this,e,null,Se,re,{})}}function Le(r){let e,l;return{c(){e=se("svg"),l=se("path"),this.h()},l(t){e=ie(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=d(e);l=ie(s,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),d(l).forEach(c),s.forEach(c),this.h()},h(){o(l,"d","M1.66699 14.6667H20.3337M1.66699 8.00004H20.3337M1.66699 1.33337H12.3337"),o(l,"stroke","white"),o(l,"stroke-width","2"),o(l,"stroke-linecap","round"),o(l,"stroke-linejoin","round"),o(e,"width","22"),o(e,"height","16"),o(e,"viewBox","0 0 22 16"),o(e,"fill","none"),o(e,"xmlns","http://www.w3.org/2000/svg")},m(t,s){D(t,e,s),m(e,l)},p:S,i:S,o:S,d(t){t&&c(e)}}}class Ne extends ne{constructor(e){super(),ae(this,e,null,Le,re,{})}}function Oe(r){let e=JSON.parse(localStorage.getItem("watch_history"));e||(e=[]);let l=e.filter(t=>t.kinopoiskId!=r.kinopoiskId);localStorage.setItem("watch_history",JSON.stringify(l))}let Pe="https://kinopoiskapiunofficial.tech/api/v2.2/films/";async function Ue(r){return r?await(await fetch(`${Pe}${r}`,ye)).json():{}}function ke(r,e,l){const t=r.slice();return t[4]=e[l],t}function Be(r){let e,l,t,s,f,i,n,b=r[3].title+"",a,u,_,M=r[3].text+"",R,j;const z=[ze,qe],w=[];function P(k,I){return k[3].title=="Ничего не найдено"?0:1}return t=P(r),s=w[t]=z[t](r),{c(){e=v("div"),l=v("div"),s.c(),f=N(),i=v("div"),n=v("p"),a=T(b),u=N(),_=v("span"),R=T(M),this.h()},l(k){e=g(k,"DIV",{class:!0});var I=d(e);l=g(I,"DIV",{class:!0});var L=d(l);s.l(L),L.forEach(c),f=O(I),i=g(I,"DIV",{class:!0});var $=d(i);n=g($,"P",{class:!0});var J=d(n);a=K(J,b),J.forEach(c),u=O($),_=g($,"SPAN",{class:!0});var y=d(_);R=K(y,M),y.forEach(c),$.forEach(c),I.forEach(c),this.h()},h(){o(l,"class","visual svelte-mlj3oc"),o(n,"class","svelte-mlj3oc"),o(_,"class","svelte-mlj3oc"),o(i,"class","text svelte-mlj3oc"),o(e,"class","nothing svelte-mlj3oc")},m(k,I){D(k,e,I),m(e,l),w[t].m(l,null),m(e,f),m(e,i),m(i,n),m(n,a),m(i,u),m(i,_),m(_,R),j=!0},p(k,I){let L=t;t=P(k),t!==L&&(oe(),H(w[L],1,1,()=>{w[L]=null}),fe(),s=w[t],s||(s=w[t]=z[t](k),s.c()),C(s,1),s.m(l,null)),(!j||I&8)&&b!==(b=k[3].title+"")&&q(a,b),(!j||I&8)&&M!==(M=k[3].text+"")&&q(R,M)},i(k){j||(C(s),j=!0)},o(k){H(s),j=!1},d(k){k&&c(e),w[t].d()}}}function Te(r){let e,l,t=[],s=new Map,f,i=r[0]&&be(r),n=pe(r[1]);const b=a=>a[4].filmId||a[4].id||a[4].kinopoiskId;for(let a=0;a<n.length;a+=1){let u=ke(r,n,a),_=b(u);s.set(_,t[a]=we(_,u))}return{c(){i&&i.c(),e=N(),l=v("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){i&&i.l(a),e=O(a),l=g(a,"UL",{class:!0});var u=d(l);for(let _=0;_<t.length;_+=1)t[_].l(u);u.forEach(c),this.h()},h(){o(l,"class","svelte-mlj3oc")},m(a,u){i&&i.m(a,u),D(a,e,u),D(a,l,u);for(let _=0;_<t.length;_+=1)t[_]&&t[_].m(l,null);f=!0},p(a,u){a[0]?i?i.p(a,u):(i=be(a),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),u&6&&(n=pe(a[1]),oe(),t=He(t,u,b,1,a,n,s,l,je,we,null,ke),fe())},i(a){if(!f){for(let u=0;u<n.length;u+=1)C(t[u]);f=!0}},o(a){for(let u=0;u<t.length;u+=1)H(t[u]);f=!1},d(a){a&&(c(e),c(l)),i&&i.d(a);for(let u=0;u<t.length;u+=1)t[u].d()}}}function Ke(r){let e,l='<div class="loader-spin svelte-mlj3oc"></div>';return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=g(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1en9h6o"&&(e.innerHTML=l),this.h()},h(){o(e,"class","loader svelte-mlj3oc")},m(t,s){D(t,e,s)},p:S,i:S,o:S,d(t){t&&c(e)}}}function qe(r){let e,l;return e=new Ne({}),{c(){Q(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){H(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function ze(r){let e,l;return e=new $e({}),{c(){Q(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){H(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function be(r){let e,l;return{c(){e=v("h2"),l=T(r[0]),this.h()},l(t){e=g(t,"H2",{class:!0});var s=d(e);l=K(s,r[0]),s.forEach(c),this.h()},h(){o(e,"class","svelte-mlj3oc")},m(t,s){D(t,e,s),m(e,l)},p(t,s){s&1&&q(l,t[0])},d(t){t&&c(e)}}}function we(r,e){let l,t,s;return t=new Ye({props:{film:e[4],canDelete:e[2]}}),{key:r,first:null,c(){l=ge(),Q(t.$$.fragment),this.h()},l(f){l=ge(),X(t.$$.fragment,f),this.h()},h(){this.first=l},m(f,i){D(f,l,i),Y(t,f,i),s=!0},p(f,i){e=f;const n={};i&2&&(n.film=e[4]),i&4&&(n.canDelete=e[2]),t.$set(n)},i(f){s||(C(t.$$.fragment,f),s=!0)},o(f){H(t.$$.fragment,f),s=!1},d(f){f&&c(l),Z(t,f)}}}function Je(r){let e,l,t,s,f;const i=[Ke,Te,Be],n=[];function b(a,u){return u&2&&(l=null),l==null&&(l=!Array.isArray(a[1])),l?0:a[1][0]?1:a[3].disable?-1:2}return~(t=b(r,-1))&&(s=n[t]=i[t](r)),{c(){e=v("section"),s&&s.c(),this.h()},l(a){e=g(a,"SECTION",{class:!0});var u=d(e);s&&s.l(u),u.forEach(c),this.h()},h(){o(e,"class","svelte-mlj3oc"),W(e,"disable",Array.isArray(r[1])&&!r[1].length&&r[3].disable)},m(a,u){D(a,e,u),~t&&n[t].m(e,null),f=!0},p(a,[u]){let _=t;t=b(a,u),t===_?~t&&n[t].p(a,u):(s&&(oe(),H(n[_],1,1,()=>{n[_]=null}),fe()),~t?(s=n[t],s?s.p(a,u):(s=n[t]=i[t](a),s.c()),C(s,1),s.m(e,null)):s=null),(!f||u&10)&&W(e,"disable",Array.isArray(a[1])&&!a[1].length&&a[3].disable)},i(a){f||(C(s),f=!0)},o(a){H(s),f=!1},d(a){a&&c(e),~t&&n[t].d()}}}function Fe(r,e,l){let{lable:t=""}=e,{list:s}=e,{canDelete:f=!1}=e,{nothing:i={title:"Ничего не найдено",text:"",disable:!1}}=e;return r.$$set=n=>{"lable"in n&&l(0,t=n.lable),"list"in n&&l(1,s=n.list),"canDelete"in n&&l(2,f=n.canDelete),"nothing"in n&&l(3,i=n.nothing)},[t,s,f,i]}class st extends ne{constructor(e){super(),ae(this,e,Fe,Je,re,{lable:0,list:1,canDelete:2,nothing:3})}}function Ge(r){let e;return{c(){e=v("span"),this.h()},l(l){e=g(l,"SPAN",{class:!0}),d(e).forEach(c),this.h()},h(){o(e,"class","svelte-g2munl")},m(l,t){D(l,e,t)},p:S,d(l){l&&c(e)}}}function We(r){let e,l="Кинопоиск:",t,s,f;return{c(){e=v("span"),e.textContent=l,t=N(),s=v("mark"),f=T(r[2]),this.h()},l(i){e=g(i,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-tbpxtp"&&(e.textContent=l),t=O(i),s=g(i,"MARK",{class:!0});var n=d(s);f=K(n,r[2]),n.forEach(c),this.h()},h(){o(e,"class","svelte-g2munl"),o(s,"class","svelte-g2munl"),W(s,"okey",r[2]>3.9&&r[2]<7),W(s,"bad",r[2]<4)},m(i,n){D(i,e,n),D(i,t,n),D(i,s,n),m(s,f)},p(i,n){n&4&&q(f,i[2]),n&4&&W(s,"okey",i[2]>3.9&&i[2]<7),n&4&&W(s,"bad",i[2]<4)},d(i){i&&(c(e),c(t),c(s))}}}function Ee(r){let e,l,t,s,f;return l=new Re({}),{c(){e=v("button"),Q(l.$$.fragment),this.h()},l(i){e=g(i,"BUTTON",{class:!0,title:!0});var n=d(e);X(l.$$.fragment,n),n.forEach(c),this.h()},h(){o(e,"class","delete svelte-g2munl"),o(e,"title","Удалить")},m(i,n){D(i,e,n),Y(l,e,null),t=!0,s||(f=Ce(e,"click",Me(r[3])),s=!0)},p:S,i(i){t||(C(l.$$.fragment,i),t=!0)},o(i){H(l.$$.fragment,i),t=!1},d(i){i&&c(e),Z(l),s=!1,f()}}}function Qe(r){let e,l,t,s,f,i,n,b=(r[0].nameRu||r[0].nameEn||r[0].nameOriginal)+"",a,u,_,M,R=r[0].year+"",j,z,w,P=(r[0].description||"")+"",k,I,L,$,J,y,x,F,B,ee,A;function ue(h,E){return h[2]>0?We:Ge}let te=ue(r),V=te(r),p=r[1]&&Ee(r);return B=new Ae({}),{c(){e=v("a"),l=v("li"),t=v("img"),f=N(),i=v("div"),n=v("h3"),a=T(b),_=N(),M=v("time"),j=T(R),z=N(),w=v("p"),k=T(P),L=N(),$=v("div"),V.c(),J=N(),y=v("div"),p&&p.c(),x=N(),F=v("div"),Q(B.$$.fragment),this.h()},l(h){e=g(h,"A",{href:!0,class:!0});var E=d(e);l=g(E,"LI",{class:!0});var G=d(l);t=g(G,"IMG",{src:!0,alt:!0,loading:!0,class:!0}),f=O(G),i=g(G,"DIV",{class:!0});var U=d(i);n=g(U,"H3",{title:!0,class:!0});var ce=d(n);a=K(ce,b),ce.forEach(c),_=O(U),M=g(U,"TIME",{class:!0});var he=d(M);j=K(he,R),he.forEach(c),z=O(U),w=g(U,"P",{title:!0,class:!0});var me=d(w);k=K(me,P),me.forEach(c),L=O(U),$=g(U,"DIV",{});var _e=d($);V.l(_e),_e.forEach(c),U.forEach(c),J=O(G),y=g(G,"DIV",{class:!0});var le=d(y);p&&p.l(le),x=O(le),F=g(le,"DIV",{class:!0});var de=d(F);X(B.$$.fragment,de),de.forEach(c),le.forEach(c),G.forEach(c),E.forEach(c),this.h()},h(){ve(t.src,s=r[0].posterUrlPreview||r[0].posterUrl)||o(t,"src",s),o(t,"alt","Постер"),o(t,"loading","lazy"),t.inert=!0,o(t,"class","svelte-g2munl"),o(n,"title",u=r[0].nameRu||r[0].nameEn||r[0].nameOriginal),o(n,"class","svelte-g2munl"),o(M,"class","svelte-g2munl"),o(w,"title",I=r[0].description||""),o(w,"class","svelte-g2munl"),o(i,"class","text svelte-g2munl"),o(F,"class","arrow svelte-g2munl"),o(y,"class","actions svelte-g2munl"),o(l,"class","svelte-g2munl"),o(e,"href",ee=`/watch?id=${r[0].filmId||r[0].id||r[0].kinopoiskId}`),o(e,"class","svelte-g2munl")},m(h,E){D(h,e,E),m(e,l),m(l,t),m(l,f),m(l,i),m(i,n),m(n,a),m(i,_),m(i,M),m(M,j),m(i,z),m(i,w),m(w,k),m(i,L),m(i,$),V.m($,null),m(l,J),m(l,y),p&&p.m(y,null),m(y,x),m(y,F),Y(B,F,null),A=!0},p(h,[E]){(!A||E&1&&!ve(t.src,s=h[0].posterUrlPreview||h[0].posterUrl))&&o(t,"src",s),(!A||E&1)&&b!==(b=(h[0].nameRu||h[0].nameEn||h[0].nameOriginal)+"")&&q(a,b),(!A||E&1&&u!==(u=h[0].nameRu||h[0].nameEn||h[0].nameOriginal))&&o(n,"title",u),(!A||E&1)&&R!==(R=h[0].year+"")&&q(j,R),(!A||E&1)&&P!==(P=(h[0].description||"")+"")&&q(k,P),(!A||E&1&&I!==(I=h[0].description||""))&&o(w,"title",I),te===(te=ue(h))&&V?V.p(h,E):(V.d(1),V=te(h),V&&(V.c(),V.m($,null))),h[1]?p?(p.p(h,E),E&2&&C(p,1)):(p=Ee(h),p.c(),C(p,1),p.m(y,x)):p&&(oe(),H(p,1,1,()=>{p=null}),fe()),(!A||E&1&&ee!==(ee=`/watch?id=${h[0].filmId||h[0].id||h[0].kinopoiskId}`))&&o(e,"href",ee)},i(h){A||(C(p),C(B.$$.fragment,h),A=!0)},o(h){H(p),H(B.$$.fragment,h),A=!1},d(h){h&&c(e),V.d(),p&&p.d(),Z(B)}}}function Xe(r,e,l){let{canDelete:t=!1}=e,{film:s}=e,f=s.rating||s.ratingKinopoisk;function i(){Oe(s),Ve("")}return De(async()=>{s.description||(l(0,s=await Ue(s.filmId||s.id||s.kinopoiskId)),l(2,f=s.rating||s.ratingKinopoisk))}),r.$$set=n=>{"canDelete"in n&&l(1,t=n.canDelete),"film"in n&&l(0,s=n.film)},[s,t,f,i]}class Ye extends ne{constructor(e){super(),ae(this,e,Xe,Qe,re,{canDelete:1,film:0})}}export{Re as D,st as R,Ue as g};
